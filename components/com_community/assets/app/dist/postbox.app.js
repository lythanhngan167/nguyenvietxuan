(window.webpackJsonp=window.webpackJsonp||[]).push([[4],[,,function(t,e,o){"use strict";e.a=function(t){if("string"==typeof t&&t.length){var e=joms.language;for(t=t.split(".");t.length;)e=e[t.shift()];return e}}},function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));const s=jQuery.extend(!0,{},joms&&joms.constants),i={get(t){if("string"!=typeof t||!t.length)return;let e=s;for(t=t.split(".");t.length;)e=e[t.shift()];return e},set(t,e){if("string"!=typeof t||!t.length)return;let o,i=s,a=t.split(".");for(let t=0;t<a.length;t++)o=a[t],t!==a.length-1&&(i=i[o]);i[o]=e}}},,,function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-action"},[o("button",{staticClass:"joms-postbox-cancel",on:{click:t.reset}},[t._v(t._s(t.cancel))]),t._v(" "),t.isPostable?o("button",{staticClass:"joms-postbox-save",on:{click:t.validate}},[t._v(t._s(t.save))]):t._e()])};s._withStripped=!0;var i=o(2),a={props:{isPostable:{type:Boolean,default:!1},cancel:{type:String,default:Object(i.a)("postbox.cancel_button")},save:{type:String,default:Object(i.a)("postbox.post_button")}},methods:{validate(){this.$emit("validate")},reset(){this.$emit("reset")}}},r=o(1),n=Object(r.a)(a,s,[],!1,null,null,null);n.options.__file="src/views/postbox/_components/JAction.vue";e.a=n.exports},function(t,e,o){"use strict";var s=function(){var t=this.$createElement;return(this._self._c||t)("nav",{staticClass:"joms-postbox-tab"},[this._t("default")],2)};s._withStripped=!0;var i={},a=(o(112),o(1)),r=Object(a.a)(i,s,[],!1,null,null,null);r.options.__file="src/views/postbox/_components/JMiniBar.vue";e.a=r.exports},function(t,e,o){"use strict";var s=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"joms-postbox-loading"},[e("img",{attrs:{src:this.img,alt:"loader"}})])};s._withStripped=!0;var i={data:()=>({img:Joomla.getOptions("com_community").assets_url+"ajax-loader.gif"})},a=o(1),r=Object(a.a)(i,s,[],!1,null,null,null);r.options.__file="src/views/postbox/_components/JLoading.vue";e.a=r.exports},,,function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"j-editor-touch-device"},[o("div",{staticClass:"j-textarea__beautifier",domProps:{innerHTML:t._s(t.beautiferValue)}}),t._v(" "),o("textarea-autosize",{staticClass:"j-textarea",attrs:{placeholder:t.placeholder,"min-height":t.isColorful?200:50},on:{input:t.onInputTextarea},nativeOn:{keydown:function(e){return t.onKeyDownTextarea(e)},focus:function(e){return t.onFocus(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),o("div",{domProps:{innerHTML:t._s(t.placeholderStyle)}}),t._v(" "),t.mentionListShow?o("div",{staticClass:"j-mention-list"},t._l(t.mentionList,(function(e){return o("div",{key:e.id,staticClass:"j-mention-item",on:{click:function(o){return t.addTag(e)}}},[o("img",{attrs:{src:e.avatar}}),t._v(" "),o("span",[t._v(t._s(e.name))])])})),0):t._e()],1)};s._withStripped=!0;var i=o(4),a=o(35),r=o(5),n=o.n(r);i.a.use(a.a);var c={props:{bg:{type:Object,default:()=>({})},isColorful:{type:Boolean,default:!1},placeholder:{type:String,default:"What's on your mind?"}},data:()=>({beautiferValue:"",value:"",tagsAdded:[],mentionList:[],mentionListShow:!1,mentionCharPos:0,cursorPos:0,afterTagging:!1}),computed:{placeholderStyle(){return this.bg.placeholdercolor?`\n                <style>\n                    .joms-postbox__status-composer textarea.j-textarea::-webkit-input-placeholder {\n                        color: #${this.bg.placeholdercolor};\n                    }\n\n                    .joms-postbox__status-composer textarea.j-textarea:-moz-placeholder {\n                        color: #${this.bg.placeholdercolor};  \n                    }\n\n                    .joms-postbox__status-composer textarea.j-textarea::-moz-placeholder {\n                        color: #${this.bg.placeholdercolor};  \n                    }\n\n                    .joms-postbox__status-composer textarea.j-textarea:-ms-input-placeholder {\n                        color: #${this.bg.placeholdercolor};  \n                    }\n\n                    .joms-postbox__status-composer textarea.j-textarea::placeholder {\n                        color: #${this.bg.placeholdercolor};  \n                    }\n\n                    .joms-postbox__status-composer .colorful-editor .j-textarea__beautifier span {\n                        color: #${this.bg.textcolor};\n                    }\n                </style>`:""}},methods:{addTag(t){this.tagsAdded.push({id:t.id,name:t.name,start:this.mentionCharPos,length:t.name.length});const e=this.value.slice(0,this.mentionCharPos),o=this.value.substring(this.cursorPos);this.value=e+t.name+o,this.afterTagging=!0,setTimeout(()=>{this.afterTagging=!1},300),this.updateBeautifier(this.value,this.tagsAdded),this.updateHiddenInput(this.value,this.tagsAdded),this.hideMentionList(),this.focus()},updateBeautifier:n()((function(t,e){let o,s,i,a,r;if(e.length){for(o="^",s="",i=0,r=0;r<e.length;r++)a=e[r],o+="([\\s\\S]{"+(a.start-i)+"})([\\s\\S]{"+a.length+"})",s+="$"+(2*r+1)+"[span]"+a.name+"[/span]",i=a.start+a.length;o=new RegExp(o),t=t.replace(o,s)}t=(t=(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/\[(\/?span)\]/g,"<$1>")).replace(/\n/g,"<br>"),this.beautiferValue=t}),1),updateHiddenInput:n()((function(t,e){let o,s,i,a,r;if(e.length){for(o="^",s="",i=0,r=0;r<e.length;r++)a=e[r],o+="([\\s\\S]{"+(a.start-i)+"})([\\s\\S]{"+a.length+"})",s+="$"+(2*r+1)+"@[["+a.id+":contact:"+a.name+"]]",i=a.start+a.length;o=new RegExp(o),t=t.replace(o,s)}const n=t.replace(/@\[\[.*?\]\]/g,"0").length;this.$emit("change",{value:t,numchar:n})}),100),onKeyDownTextarea(){const t=this.$el.querySelector(".j-textarea");this.prevSelStart=t.selectionStart,this.prevSelEnd=t.selectionEnd},onInputTextarea(t){var e,o,s,i;const a=this.$el.querySelector(".j-textarea");if(this.tagsAdded.length&&!this.afterTagging){if(this.prevSelStart!==this.prevSelEnd)for(i=0;i<this.tagsAdded.length;i++)s=(o=this.tagsAdded[i]).start+o.length,(this.prevSelStart>o.start&&this.prevSelStart<s||this.prevSelEnd>o.start&&this.prevSelEnd<s||o.start>=this.prevSelStart&&s<=this.prevSelEnd)&&this.tagsAdded.splice(i--,1);for(e=a.selectionStart-this.prevSelStart-(this.prevSelEnd-this.prevSelStart),i=0;i<this.tagsAdded.length;i++){s=(o=this.tagsAdded[i]).start+o.length;const t=o.start>this.prevSelStart,a=o.start===this.prevSelStart,r=s<this.prevSelStart,n=s>this.prevSelStart,c=e<0;t||a?o.start+=e:r||!n&&!c||this.tagsAdded.splice(i--,1)}}this.updateBeautifier(this.value,this.tagsAdded),this.updateHiddenInput(this.value,this.tagsAdded),this.toggleMentionList(t)},onFocus(){this.$emit("focus")},toggleMentionList:n()((function(t){const e=this.$el.querySelector(".j-textarea");this.cursorPos=e.selectionStart;const o=t.slice(0,this.cursorPos),s=o.lastIndexOf("@");if(s<0)return void this.hideMentionList();if(0!==s&&!o[s-1].match(/\s/g))return void this.hideMentionList();this.mentionCharPos=this.cursorPos-(o.length-s);const a=o.substring(s+1);if(a.length){o[s];const t=joms_friends.filter(t=>{const e=t.name.toLowerCase().indexOf(a.toLowerCase())>-1,o=this.tagsAdded.find(e=>e.id===t.id);return e&&!o});if(t.length)return i.a.set(this,"mentionList",t),void this.showMentionList()}this.hideMentionList()}),300),hideMentionList(){this.mentionListShow=!1},showMentionList(){this.mentionListShow=!0},reset(){this.value="",i.a.set(this,"tagsAdded",[])},focus(){const t=this.$el.querySelector(".j-textarea");t&&t.focus()},insertEmoji(t){const e=this.$el.querySelector(".j-textarea"),o=e.value.slice(0,e.selectionStart),s=e.value.substring(e.selectionStart);this.value=o+t.native+s,setTimeout(()=>{e.selectionStart=o.length+t.native.length,this.focus()})}}},l=(o(116),o(1)),m=Object(l.a)(c,s,[],!1,null,null,null);m.options.__file="src/common/JEditorTouchDevice.vue";e.a=m.exports},function(t,e,o){"use strict";var s=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"j-emoji"},[e("img",{staticClass:"j-emoji-icon",attrs:{src:this.assets_url+"mood_19.png"},on:{click:this.toggleBoard}}),this._v(" "),e("div",{staticClass:"j-emoji-content"},[e("keep-alive",[this.showBoard?e("JEmojiBoard",{directives:[{name:"click-outside",rawName:"v-click-outside",value:this.hideBoard,expression:"hideBoard"}],on:{selectEmoji:this.selectEmoji}}):this._e()],1)],1)])};s._withStripped=!0;var i=o(5),a={data:()=>({assets_url:Joomla.getOptions("com_community").assets_url,showBoard:!1}),components:{JEmojiBoard:()=>o.e(0).then(o.bind(null,163))},methods:{toggleBoard:o.n(i)()((function(){this.showBoard=!this.showBoard}),100),hideBoard(t){const e=t.target.getAttribute("class");(e?e.split(" "):[]).indexOf("j-emoji-icon")>-1||(this.showBoard=!1)},selectEmoji(t){this.$emit("selectEmoji",t)}}},r=(o(117),o(1)),n=Object(r.a)(a,s,[],!1,null,null,null);n.options.__file="src/common/JEmoji.vue";e.a=n.exports},function(t,e,o){"use strict";var s=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"joms-postbox-charcount",class:this.overClass},[this._v(this._s(this.num))])};s._withStripped=!0;var i={props:{num:Number},computed:{overClass(){return{over:this.num<0}}}},a=(o(118),o(1)),r=Object(a.a)(i,s,[],!1,null,null,null);r.options.__file="src/views/postbox/_components/JCharCount.vue";e.a=r.exports},,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var _JEventComposer_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(159),_JEventMiniBar_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(158),_JEventConfig_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(156),_JEventPreview_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(157),luxon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17),luxon__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_4__),_utils_language__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2);__webpack_exports__.a={components:{JEventComposer:_JEventComposer_vue__WEBPACK_IMPORTED_MODULE_0__.a,JEventMiniBar:_JEventMiniBar_vue__WEBPACK_IMPORTED_MODULE_1__.a,JEventConfig:_JEventConfig_vue__WEBPACK_IMPORTED_MODULE_2__.a,JEventPreview:_JEventPreview_vue__WEBPACK_IMPORTED_MODULE_3__.a},data:()=>({config:!1,placeholderEventTitle:Object(_utils_language__WEBPACK_IMPORTED_MODULE_5__.a)("event.title_hint")}),computed:{title:{get(){return this.$store.state.event.attachment.title},set(t){this.$store.commit("event/setTitle",t)}}},methods:{validate(){this.post()},post(){const DATA=Joomla.getOptions("com_community"),filterParams=DATA.stream_filter_params?JSON.stringify(DATA.stream_filter_params):"",state=this.$store.state.event,content=state.content,attachments=JSON.stringify(state.attachment),rawData=[content,attachments,filterParams];this.$store.dispatch("post",rawData).then(res=>{if(res[0]&&"ajax_calls"===res[0][1]&&res[1]&&res[1][1]){if("__throwError"===res[1][1])return;eval(res[1][1])}this.reset()})},onEventInputFocus(){this.$store.commit("setFree",!1)},showEventConfig(){this.config=!0},hideEventConfig(){this.config=!1},saveEventConfig({inviteOnly:t,catid:e,location:o,startDate:s,endDate:i}){const a=luxon__WEBPACK_IMPORTED_MODULE_4__.DateTime.fromISO(s),r=luxon__WEBPACK_IMPORTED_MODULE_4__.DateTime.fromISO(i),n=[a.year,a.month<10?"0"+a.month:a.month,a.day<10?"0"+a.day:a.day].join("-"),c=[r.year,r.month<10?"0"+r.month:a.month,r.day<10?"0"+r.day:r.day].join("-"),l={allday:!1,event:{private:t},catid:e,location:o,startdate:n,"starttime-hour":String(a.hour<10?"0"+a.hour:a.hour),"starttime-min":String(a.minute<10?"0"+a.minute:a.minute),enddate:c,"endtime-hour":String(r.hour<10?"0"+r.hour:r.hour),"endtime-min":String(r.minute<10?"0"+r.minute:r.minute)};this.$store.commit("event/setAttachment",l),this.hideEventConfig()},reset(){this.$refs.composer.reset(),this.$store.commit("event/reset"),this.$store.commit("setFree",!0)}}}},,function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.mood&&t.mood.id?o("span",{staticClass:"j-mood-display"},[t._v("\n    - "),o("img",{staticClass:"joms-emoticon",attrs:{title:t.mood.title,src:t.mood.image}}),t._v(" "),o("b",[t._v(t._s(t.mood.description))])]):t._e()};s._withStripped=!0;var i=o(3),a={props:{moodId:{type:String,default:"0"}},computed:{mood(){const{enablemood:t}=i.a.get("conf");if(!t)return;return JSON.parse(JSON.stringify(i.a.get("moods"))).find(t=>t.id===this.moodId)}}},r=o(1),n=Object(r.a)(a,s,[],!1,null,null,null);n.options.__file="src/views/postbox/_components/JMoodDisplay.vue";e.a=n.exports},,,,,,,,,,,,,function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},,,function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},,,function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";o(36)},,,,function(t,e,o){"use strict";o(37)},function(t,e,o){"use strict";o(38)},function(t,e,o){"use strict";o(39)},function(t,e,o){"use strict";o(40)},,function(t,e,o){"use strict";o(43)},function(t,e,o){"use strict";o(44)},function(t,e,o){"use strict";o(45)},function(t,e,o){"use strict";o(46)},function(t,e,o){"use strict";o(47)},function(t,e,o){"use strict";o(50)},function(t,e,o){"use strict";o(51)},function(t,e,o){"use strict";o(52)},function(t,e,o){"use strict";o(53)},function(t,e,o){"use strict";o(54)},function(t,e,o){"use strict";o(55)},,function(t,e,o){"use strict";o(56)},function(t,e,o){"use strict";o(57)},function(t,e,o){"use strict";o(58)},function(t,e,o){"use strict";o(59)},,,,function(t,e,o){"use strict";o(60)},function(t,e,o){"use strict";o(61)},function(t,e,o){"use strict";o(62)},function(t,e,o){"use strict";o(63)},,,,,,,,,,,,,function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-dropdown event-dropdown"},[o("div",{staticClass:"event-row"},[o("div",{staticClass:"event-time-column"},[o("label",{staticClass:"joms-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.inviteOnly,expression:"inviteOnly"}],staticClass:"joms-checkbox private-event",attrs:{type:"checkbox",name:"permission"},domProps:{checked:Array.isArray(t.inviteOnly)?t._i(t.inviteOnly,null)>-1:t.inviteOnly},on:{change:function(e){var o=t.inviteOnly,s=e.target,i=!!s.checked;if(Array.isArray(o)){var a=t._i(o,null);s.checked?a<0&&(t.inviteOnly=o.concat([null])):a>-1&&(t.inviteOnly=o.slice(0,a).concat(o.slice(a+1)))}else t.inviteOnly=i}}}),t._v(" "),o("span",{attrs:{title:t.eventPrivateTipsText}},[t._v("\n                    "+t._s(t.eventPrivateText)+"\n                ")])])])]),t._v(" "),o("div",{staticClass:"event-row"},[o("div",{staticClass:"event-time-column"},[o("span",[t._v(t._s(t.categoryText)),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("div",{staticClass:"joms-select--wrapper"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.catid,expression:"catid"}],staticClass:"joms-event-category joms-select",staticStyle:{width:"100%"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.catid=e.target.multiple?o:o[0]}}},[o("option",{attrs:{disabled:"",value:""}},[t._v(t._s(t.selectCategoryText))]),t._v(" "),t._l(t.categories,(function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}))],2)])]),t._v(" "),o("div",{staticClass:"event-time-column"},[o("span",[t._v(t._s(t.locationLabel)),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],staticClass:"joms-input",attrs:{type:"text",placeholder:t.locationHint},domProps:{value:t.location},on:{input:function(e){e.target.composing||(t.location=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"event-row"},[o("span",[t._v(t._s(t.startText)),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("VueDateTime",{attrs:{"use12-hour":"",type:"datetime","input-id":"joms-postbox-event-start-date","input-class":"joms-input","min-datetime":t.now,placeholder:t.startDateText},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),o("div",{staticClass:"event-row"},[o("span",[t._v(t._s(t.endText)),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("VueDateTime",{attrs:{"use12-hour":"",type:"datetime","input-id":"joms-postbox-event-end-date","input-class":"joms-input","min-datetime":t.now,placeholder:t.endDateText},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),o("div",{staticClass:"joms-postbox-action event-action"},[o("button",{staticClass:"joms-button--primary joms-button--smallest",on:{click:t.save}},[t._v(t._s(t.doneText))])])])};s._withStripped=!0;o(41);var i=o(42),a=o(3),r=o(2),n={components:{VueDateTime:i.Datetime},data:()=>({categories:a.a.get("eventCategories"),catid:"",location:"",startDate:"",endDate:"",now:(new Date).toISOString(),inviteOnly:!1,categoryText:Object(r.a)("event.category"),selectCategoryText:Object(r.a)("select_category"),eventPrivateText:Object(r.a)("event.private"),eventPrivateTipsText:Object(r.a)("event.private_tips"),locationLabel:Object(r.a)("event.location"),locationHint:Object(r.a)("event.location_hint"),startText:Object(r.a)("event.start"),startDateText:Object(r.a)("event.start_date_hint"),endText:Object(r.a)("event.end"),endDateText:Object(r.a)("event.end_date_hint"),doneText:Object(r.a)("event.done_button")}),methods:{save(){if(!this.catid)return alert(Object(r.a)("event.category_not_selected"));if(!this.location)return alert(Object(r.a)("event.location_not_selected"));if(!this.startDate)return alert(Object(r.a)("event.start_date_not_selected"));if(!this.endDate)return alert(Object(r.a)("event.end_date_not_selected"));if(this.endDate<=this.startDate)return alert(Object(r.a)("event.end_date_too_early"));const{inviteOnly:t,catid:e,location:o,startDate:s,endDate:i}=this;this.$emit("save",{inviteOnly:t,catid:e,location:o,startDate:s,endDate:i})},reset(){}}},c=(o(121),o(1)),l=Object(c.a)(n,s,[],!1,null,null,null);l.options.__file="src/views/postbox/event/JEventConfig.vue";e.a=l.exports},function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-event-detail"},[o("div",{staticClass:"joms-postbox-event-panel joms-postbox-event-label-category"},[o("div",{staticClass:"joms-postbox-event-title"},[o("div",{staticClass:"joms-input-field-name"},[t._v(t._s(t.categoryText))]),t._v(" "),o("span",{staticClass:"joms-input-text"},[t._v(t._s(t.category.name))])])]),t._v(" "),o("div",{staticClass:"joms-postbox-event-panel joms-postbox-event-label-location"},[o("div",{staticClass:"joms-postbox-event-title"},[o("div",{staticClass:"joms-input-field-name"},[t._v(t._s(t.locationLabel))]),t._v(" "),o("span",{staticClass:"joms-input-text"},[t._v(t._s(t.location))])])]),t._v(" "),o("div",{staticClass:"joms-postbox-event-panel joms-postbox-event-label-date"},[o("div",{staticClass:"joms-postbox-event-title"},[o("div",{staticClass:"joms-input-field-name"},[t._v(t._s(t.dateAndTimeText))]),t._v(" "),o("span",{staticClass:"joms-input-text"},[t._v(t._s(t.startDate)+" â€” "+t._s(t.endDate))])])])])};s._withStripped=!0;var i=o(17),a=o(3),r=o(2),n={data:()=>({categoryText:Object(r.a)("event.category"),locationLabel:Object(r.a)("event.location"),dateAndTimeText:Object(r.a)("event.date_and_time")}),computed:{category(){return a.a.get("eventCategories").find(t=>t.id===this.$store.state.event.attachment.catid)||{}},location(){return this.$store.state.event.attachment.location},startDate(){const{attachment:t}=this.$store.state.event,e=[t["starttime-hour"],t["starttime-min"],"00"].join(":"),o=t.startdate+" "+e;return i.DateTime.fromSQL(o).toFormat("ff")},endDate(){const{attachment:t}=this.$store.state.event,e=[t["endtime-hour"],t["endtime-min"],"00"].join(":"),o=t.enddate+" "+e;return i.DateTime.fromSQL(o).toFormat("ff")}}},c=(o(122),o(1)),l=Object(c.a)(n,s,[],!1,null,null,null);l.options.__file="src/views/postbox/event/JEventPreview.vue";e.a=l.exports},function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[o("li",{on:{click:function(e){return t.$emit("showEventConfig")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-cog"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.eventDetailText))])])]),t._v(" "),t.isFree?t._e():o("JAction",{attrs:{isPostable:t.isPostable},on:{reset:function(e){return t.$emit("reset")},validate:function(e){return t.$emit("validate")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};s._withStripped=!0;var i=o(7),a=o(6),r=o(8),n=o(2),c={components:{JMiniBar:i.a,JAction:a.a,JLoading:r.a},data:()=>({currentUrl:Joomla.getOptions("com_community").current_url,eventDetailText:Object(n.a)("event.event_detail").toLowerCase()}),computed:{isPostable(){const t=this.$store.state.numCharLeft,e=!!this.$store.state.event.attachment.title,o=!!this.$store.state.event.attachment.catid;return e&&o&&t>-1},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading}}},l=o(1),m=Object(l.a)(c,s,[],!1,null,null,null);m.options.__file="src/views/postbox/event/JEventMiniBar.vue";e.a=m.exports},function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__event-composer"},[o(t.currentEditor,{ref:"editor",tag:"component",staticClass:"normal-editor",attrs:{isColorful:!1,placeholder:t.placeholder},on:{focus:t.onEditorFocus,change:t.onEditorChange}}),t._v(" "),o("JCharCount",{attrs:{num:t.numCharLeft}}),t._v(" "),o("JMoodDisplay",{attrs:{moodId:t.moodId}}),t._v(" "),o("div",{staticClass:"j-event-composer-toolbar"},[o("div",{staticClass:"toolbar-bg-picker"}),t._v(" "),t.isTouch?t._e():o("div",{staticClass:"toolbar-emoji"},[o("JEmoji",{on:{selectEmoji:t.selectEmoji}})],1)])],1)};s._withStripped=!0;var i=o(11),a=o(12),r=o(23),n=o(13),c=o(3),l=o(2),m={components:{JEditorTouchDevice:i.a,JMoodDisplay:r.a,JCharCount:n.a,JEmoji:a.a},data:()=>({charLimit:+c.a.get("conf.statusmaxchar"),numchar:0,placeholder:Object(l.a)("status.event_hint")}),mounted(){this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},computed:{currentEditor:()=>"JEditorTouchDevice",isTouch(){return this.$store.state.isTouch},moodId(){return this.$store.state.event.attachment.mood},numCharLeft(){return this.$store.state.numCharLeft}},methods:{onEditorFocus(){this.$store.commit("setFree",!1)},onEditorChange({value:t,numchar:e}){this.numchar=e,this.$store.commit("event/setContent",t),this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},reset(){this.$refs.editor.reset()},selectEmoji(t){this.$refs.editor.insertEmoji(t)}}},d=(o(119),o(1)),p=Object(d.a)(m,s,[],!1,null,null,null);p.options.__file="src/views/postbox/event/JEventComposer.vue";e.a=p.exports},,,function(t,e,o){"use strict";o.r(e);var s=o(4),i=o(110),a=o(3);const{target:r,element:n}=a.a.get("postbox.attachment"),c={element:n,target:r,type:"message",privacy:a.a.get("conf.profiledefaultprivacy"),mood:"",colorful:!1,bgid:"0",location:[],fetch:[]};var l={namespaced:!0,state:{content:"",attachment:JSON.parse(JSON.stringify(c))},mutations:{setPrivacy(t,e){t.attachment.privacy=e},setMood(t,e){t.attachment.mood=e},setContent(t,e){t.content=e},setBg(t,e){const o=t.attachment;o.colorful="0"!==e,o.bgid=e},setLocation({attachment:t},e){const o=e?[e.name,e.lat,e.lon]:[];s.a.set(t,"location",o)},setPreview({attachment:t},e){const o=e?[e.url,e.image,e.title,e.desc]:[];s.a.set(t,"fetch",o)},reset(t){t.savedBg="0",t.content="",s.a.set(t,"attachment",JSON.parse(JSON.stringify(c)))}}};const m={0:"public",10:"public",20:"site_members",30:"friends",40:"me"},d=a.a.get("album").map(t=>({value:t.id,text:t.name,sub:m[t.permissions]})),{target:p,element:u}=a.a.get("postbox.attachment"),v={element:u,target:p,type:"photo",id:[],album_id:d.length?d[0].value:"",mood:""};var h={namespaced:!0,state:{albums:d,content:"",attachment:JSON.parse(JSON.stringify(v))},mutations:{setContent(t,e){t.content=e},setAlbum({attachment:t},e){t.album_id=e},setPhoto({attachment:t},e){s.a.set(t,"id",e)},setMood(t,e){t.attachment.mood=e},reset(t){t.content="",s.a.set(t,"attachment",JSON.parse(JSON.stringify(v)))}}};const{target:_,element:f}=a.a.get("postbox.attachment"),g={element:f,target:_,type:"file",privacy:a.a.get("conf.profiledefaultprivacy"),mood:""};var b={namespaced:!0,state:{content:"",attachment:JSON.parse(JSON.stringify(g))},mutations:{setPrivacy(t,e){t.attachment.privacy=e},setMood(t,e){t.attachment.mood=e},setContent(t,e){t.content=e},setFile({attachment:t},e){s.a.set(t,"id",e)},reset(t){t.content="",s.a.set(t,"attachment",JSON.parse(JSON.stringify(g)))}}};const{target:y,element:w}=a.a.get("postbox.attachment"),j={element:w,target:y,type:"video",privacy:a.a.get("conf.profiledefaultprivacy"),mood:"",fetch:[],location:[]};var x={namespaced:!0,state:{catid:"0",content:"",attachment:JSON.parse(JSON.stringify(j))},mutations:{setPrivacy(t,e){t.attachment.privacy=e},setMood(t,e){t.attachment.mood=e},setContent(t,e){t.content=e},setPreview({attachment:t},e){const o=e?[e.id,e.url,e.image,e.title,e.desc,e.catid]:[];s.a.set(t,"fetch",o)},setCategory(t,e){if(t.catid=e,t.attachment.fetch[5])return t.attachment.fetch[5]=e},setLocation({attachment:t},e){const o=e?[e.name,e.lat,e.lon]:[];s.a.set(t,"location",o)},reset(t){t.content="",t.catid="0",s.a.set(t,"attachment",JSON.parse(JSON.stringify(j)))}}},C=o(76),P=o.n(C);const{target:$,element:J}=a.a.get("postbox.attachment"),O={element:J,target:$,type:"event",event:{private:!1},title:"",catid:"",location:"",startdate:"",enddate:"",allday:!1,"starttime-hour":"","starttime-min":"","endtime-hour":"","endtime-min":""};var k={namespaced:!0,state:{content:"",attachment:JSON.parse(JSON.stringify(O))},mutations:{setAttachment(t,e){const o=P()(JSON.parse(JSON.stringify(t.attachment)),e);s.a.set(t,"attachment",o)},setTitle({attachment:t},e){t.title=e},setContent(t,e){t.content=e},reset(t){t.content="",s.a.set(t,"attachment",JSON.parse(JSON.stringify(O)))}}};const{target:S,element:E}=a.a.get("postbox.attachment"),L={element:E,target:S,type:"poll",options:["",""],settings:{allow_multiple:!1},polltime:{enddate:[],endtime:[]},privacy:a.a.get("conf.profiledefaultprivacy"),catid:""};var T={namespaced:!0,state:{content:"",attachment:JSON.parse(JSON.stringify(L))},mutations:{setContent(t,e){t.content=e},updateOption({attachment:t},{index:e,value:o}){t.options[e]=o},addOption({attachment:t}){t.options.push("")},removeOption({attachment:t},e){t.options.splice(e,1)},setMultiple({attachment:t},e){t.settings.allow_multiple=e},setCategory({attachment:t},e){t.catid=e},setExpiryDate({attachment:t},e){s.a.set(t.polltime,"enddate",e)},setExpiryTime({attachment:t},e){s.a.set(t.polltime,"endtime",e)},setPrivacy({attachment:t},e){t.privacy=e},reset(t){t.content="",s.a.set(t,"attachment",JSON.parse(JSON.stringify(L)))}}},M={namespaced:!0,state:{type:"",content:"",privacy:"10"},mutations:{setType(t,e){t.type=e},setContent(t,e){t.content=e},setPrivacy(t,e){t.privacy=e},reset(t){t.type="",t.content="",t.privacy="10"}}},A=o(2);s.a.use(i.a);const D=jQuery,B=Joomla.getOptions("com_community").current_url,N=[{name:"public",title:Object(A.a)("privacy.public"),desc:Object(A.a)("privacy.public_desc"),icon:"earth",icon_url:B+"#joms-icon-earth",value:"10"},{name:"site_members",title:Object(A.a)("privacy.site_members"),desc:Object(A.a)("privacy.site_members_desc"),icon:"users",icon_url:B+"#joms-icon-users",value:"20"},{name:"friends",title:Object(A.a)("privacy.friends"),desc:Object(A.a)("privacy.friends_desc"),icon:"user",icon_url:B+"#joms-icon-user",value:"30"},{name:"me",title:Object(A.a)("privacy.me"),desc:Object(A.a)("privacy.me_desc"),icon:"lock",icon_url:B+"#joms-icon-lock",value:"40"}],F=a.a.get("conf.enablebackground")?a.a.get("backgrounds"):[],I=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);function U(){const t=D(".joms-comment__body,.joms-js--inbox").find(".joms-js--video").not(".joms-js--initialized").addClass(".joms-js--initialized".substr(1));t.length&&(joms.loadCSS(joms.ASSETS_URL+"vendors/mediaelement/mediaelementplayer.min.css"),t.on("click.joms-video",".joms-js--video-play",(function(){const t=D(this).closest(".joms-js--video");joms.util.video.play(t,t.data())})))}function z(t){var e=function(t){var e,o;if(t.html)return t.html;if(t&&t.length)for(var s=0;s<t.length;s++)"__throwError"!==t[s][1]&&"al"!==t[s][0]||(o=t[s][3],window.alert(D.isArray(o)?o.join(". "):o)),e||"activity-stream-container"!==t[s][1]||(e=t[s][3]);return e}(t);e&&(D(".joms-stream__wrapper").first().html(e),joms.parseEmoji(),window.joms&&joms.view&&joms.view.streams&&(joms.view.streams.start(),joms.view.misc.fixSVG()))}var V=new i.a.Store({strict:!0,state:{bgs:F,privacies:N,activeTab:"status",free:!0,loading:!1,isTouch:I,filter_config:{filter:"",value:"default_value",hashtag:!1},numCharLeft:0},actions:{post({commit:t},e){t("setLoading",!0);const o=e.map(t=>t?t.trim():"");return new Promise((e,s)=>{joms.ajax({func:"system,ajaxStreamAdd",data:o,callback:o=>{z(o),+window.joms_infinitescroll&&D(".joms-stream__loadmore").find("a").hide(),U(),t("setLoading",!1),e(o)}})})},postAdminAnnouncement({commit:t},e){t("setLoading",!0);const o=e.map(t=>t.trim());return new Promise((e,s)=>{joms.ajax({func:"activities,ajaxAddPredefined",no_html:1,data:o,callback:o=>{z(o),+window.joms_infinitescroll&&D(".joms-stream__loadmore").find("a").hide(),U(),t("setLoading",!1),e(o)}})})}},mutations:{setActiveTab(t,e){t.activeTab=e},setFree(t,e){t.free=e},setLoading(t,e){t.loading=!!e},setNumCharLeft(t,e){t.numCharLeft=e}},modules:{status:l,photo:h,file:b,video:x,event:k,poll:T,custom:M}}),q=o(111),R=o.n(q),K=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"joms-postbox"},[e("div",{staticClass:"joms-postbox-content",attrs:{id:"joms-postbox-status"}},[e("div",{staticClass:"joms-postbox-tabs"},[e(this.currentComponent,{tag:"component"})],1)]),this._v(" "),e("JTabNav",{directives:[{name:"show",rawName:"v-show",value:this.tabShow,expression:"tabShow"}]})],1)};K._withStripped=!0;var W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nav",{staticClass:"joms-postbox-tab joms-postbox-tab-root"},[o("ul",{staticClass:"joms-list inline"},t._l(t.tabs,(function(e){return o("li",{key:e.name,class:{active:e.name===t.$store.state.activeTab},attrs:{title:e.title},on:{click:function(o){return t.setActive(e.name)}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:e.icon}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(e.title))])])})),0)])};W._withStripped=!0;var H={data(){const{enablephotos:t,enablephotosgif:e,enablevideos:o,enableevents:s,enablefiles:i,enablepolls:r,enablecustoms:n}=a.a.get("conf"),{isAdmin:c,isMyProfile:l,isProfile:m,isGroup:d,isEvent:p,isPage:u}=a.a.get("settings"),v=[{name:"status",title:Object(A.a)("postbox.status"),icon:window.joms_current_url+"#joms-icon-pencil"}];return(m||d||p||u)&&t&&(v.push({name:"photo",title:Object(A.a)("postbox.photo"),icon:window.joms_current_url+"#joms-icon-camera"}),e&&v.push({name:"gif",title:Object(A.a)("postbox.gif"),icon:window.joms_current_url+"#joms-icon-images"})),(m||d||p||u)&&o&&v.push({name:"video",title:Object(A.a)("postbox.video"),icon:window.joms_current_url+"#joms-icon-play"}),(m||d||u)&&s&&v.push({name:"event",title:Object(A.a)("postbox.event"),icon:window.joms_current_url+"#joms-icon-calendar"}),(m||d||p||u)&&i&&v.push({name:"file",title:Object(A.a)("postbox.file"),icon:window.joms_current_url+"#joms-icon-file-zip"}),(m||d||p||u)&&r&&v.push({name:"poll",title:Object(A.a)("postbox.poll"),icon:window.joms_current_url+"#joms-icon-list"}),c&&n&&v.push({name:"custom",title:Object(A.a)("postbox.custom"),icon:window.joms_current_url+"#joms-icon-bullhorn"}),{tabs:v}},methods:{setActive(t){t!==this.$store.state.activeTab&&this.$store.commit("setActiveTab",t)}}},G=o(1),Q=Object(G.a)(H,W,[],!1,null,null,null);Q.options.__file="src/views/postbox/_components/JTabNav.vue";var X=Q.exports,Y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-custom-wrapper"},[t.type?t._e():o("div",{staticClass:"joms-postbox-inner-panel"},[o("div",{staticClass:"joms-postbox-double-panel"},[o("ul",{staticClass:"joms-list clearfix"},[o("li",{staticClass:"joms-postbox-predefined-message",on:{click:function(e){return t.setType("predefined")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{staticClass:"joms-icon--svg-fixed joms-icon--svg-unmodified",attrs:{href:t.currentUrl+"#joms-icon-cog"}})]),t._v("\n                     "+t._s(t.predefinedButtonText)+"\n                ")]),t._v(" "),o("li",{staticClass:"joms-postbox-custom-message",on:{click:function(e){return t.setType("custom")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{staticClass:"joms-icon--svg-fixed joms-icon--svg-unmodified joms-icon--svg-unmodified",attrs:{href:t.currentUrl+"#joms-icon-pencil"}})]),t._v("\n                     "+t._s(t.customButtonText)+"\n                ")])])])]),t._v(" "),t.type?o("div",{staticClass:"joms-postbox-custom"},["predefined"===t.type?o("div",{staticClass:"joms-postbox-custom-state-predefined"},[o("div",{staticClass:"joms-postbox-inner-panel"},[o("span",[t._v(t._s(t.predefinedLabel))]),t._v(" "),o("br"),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.activity,expression:"activity"}],staticStyle:{width:"100%"},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.activity=e.target.multiple?o:o[0]},t.setActivity]}},t._l(t.activities,(function(e){return o("option",{key:e.value,domProps:{value:e.value}},[t._v("\n                        "+t._s(e.text)+"\n                    ")])})),0)])]):t._e(),t._v(" "),"custom"===t.type?o("div",{staticClass:"joms-postbox-custom-state-custom"},[o("div",{staticClass:"joms-postbox-inner-panel"},[o("span",[t._v(t._s(t.customLabel))]),t._v(" "),o("br"),t._v(" "),o("textarea-autosize",{staticClass:"j-textarea",attrs:{"max-height":350},nativeOn:{input:function(e){return t.onInputCustom(e)}},model:{value:t.customMessage,callback:function(e){t.customMessage=e},expression:"customMessage"}})],1)]):t._e()]):t._e(),t._v(" "),o("JCustomMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showPrivacy:t.showPrivacy,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.privacy?o("JPrivacyPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePrivacy,expression:"hidePrivacy"}],attrs:{privacies:t.privacies},on:{hidePrivacy:t.hidePrivacy,setPrivacy:t.setPrivacy}}):t._e()],1)],1)};Y._withStripped=!0;var Z=o(35),tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[o("li",{on:{click:function(e){return t.$emit("showPrivacy")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-"+t.privacy.icon}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.privacy.title.toLowerCase()))])])]),t._v(" "),t.isFree?t._e():o("JAction",{ref:"action",attrs:{isPostable:t.isPostable},on:{validate:function(e){return t.$emit("validate")},reset:function(e){return t.$emit("reset")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};tt._withStripped=!0;var et=o(7),ot=o(6),st=o(8),it={components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},data:()=>({currentUrl:Joomla.getOptions("com_community").current_url}),computed:{isPostable(){return!!this.$store.state.custom.content&&!!this.$store.state.custom.type},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading},privacy(){const{custom:t,privacies:e}=this.$store.state;return e.find(e=>e.value===t.privacy)}}},at=Object(G.a)(it,tt,[],!1,null,null,null);at.options.__file="src/views/postbox/custom/JCustomMiniBar.vue";var rt=at.exports,nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-dropdown privacy-dropdown"},[o("ul",{staticClass:"joms-list"},t._l(t.privacies,(function(e){return o("li",{key:e.name,on:{click:function(o){return t.setPrivacy(e.value)}}},[o("p",{staticClass:"reset-gap"},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:e.icon_url}})]),t._v("\n                "+t._s(e.title)+"\n            ")]),t._v(" "),o("span",[t._v(t._s(e.desc))])])})),0)])};nt._withStripped=!0;var ct={props:{privacies:{type:Array,default(){return JSON.parse(JSON.stringify(this.$store.state.privacies))}}},methods:{setPrivacy(t){this.$emit("setPrivacy",t),this.$emit("hidePrivacy")}}},lt=Object(G.a)(ct,nt,[],!1,null,null,null);lt.options.__file="src/views/postbox/_components/JPrivacyPicker.vue";var mt=lt.exports;s.a.use(Z.a);var dt={components:{JCustomMiniBar:rt,JPrivacyPicker:mt},data(){const t=Joomla.getOptions("com_community").current_url,e=[],o=a.a.get("customActivities");for(const t in o)e.push({text:o[t],value:t});return{type:"",currentUrl:t,activities:e,activity:"",customMessage:"",privacy:!1,predefinedButtonText:Object(A.a)("custom.predefined_button"),customButtonText:Object(A.a)("custom.custom_button"),predefinedLabel:Object(A.a)("custom.predefined_label"),customLabel:Object(A.a)("custom.custom_label")}},computed:{privacies(){return JSON.parse(JSON.stringify(this.$store.state.privacies)).filter(t=>"public"===t.name||"site_members"===t.name)}},methods:{validate(){this.post()},post(){const t=this.$store.state.custom,{type:e,content:o,privacy:s}=t,i=[e,o,s];this.$store.dispatch("postAdminAnnouncement",i).then(()=>{this.reset()})},setActivity(){const t=this.activities.find(t=>t.value===this.activity);t&&this.$store.commit("custom/setContent",t.text),this.$store.commit("custom/setType",this.activity)},onInputCustom(t){this.$store.commit("custom/setContent",t.target.value)},setType(t){this.type=t,"custom"===t?this.$store.commit("custom/setType","system.message"):this.activity&&this.$store.commit("custom/setType",this.activity),this.$store.commit("setFree",!1)},showPrivacy(){this.privacy=!0},hidePrivacy(){this.privacy=!1},setPrivacy(t){this.$store.commit("custom/setPrivacy",t)},reset(){this.type="",this.activity="",this.customMessage="",this.$store.commit("custom/reset"),this.$store.commit("setFree",!0)}}},pt=Object(G.a)(dt,Y,[],!1,null,null,null);pt.options.__file="src/views/postbox/custom/JCustom.vue";var ut=pt.exports,vt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-event"},[o("div",{staticClass:"event-title-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:t.placeholderEventTitle},domProps:{value:t.title},on:{focus:t.onEventInputFocus,input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),t.$store.state.event.attachment.catid?o("JEventPreview"):t._e(),t._v(" "),o("JEventComposer",{ref:"composer"}),t._v(" "),o("JEventMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showEventConfig:t.showEventConfig,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.config?o("JEventConfig",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideEventConfig,expression:"hideEventConfig"}],on:{save:t.saveEventConfig}}):t._e()],1)],1)};vt._withStripped=!0;var ht=o(21).a,_t=(o(123),Object(G.a)(ht,vt,[],!1,null,null,null));_t.options.__file="src/views/postbox/event/JEvent.vue";var ft=_t.exports,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-file-wrapper"},[o("j-uploader",{ref:"uploader",attrs:{config:t.config},on:{filesChange:t.onFilesChange},scopedSlots:t._u([{key:"composer",fn:function(){return[t.composer?o("keep-alive",[o("JFileComposer",{ref:"composer"})],1):t._e()]},proxy:!0}])}),t._v(" "),o("JFileMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showMoodPicker:t.showMoodPicker,openUploader:t.openUploader,showPrivacy:t.showPrivacy,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.moodPicker?o("JMoodPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMoodPicker,expression:"hideMoodPicker"}],on:{hideMoodPicker:t.hideMoodPicker,setMood:t.setMood}}):t._e()],1),t._v(" "),o("keep-alive",[t.privacy?o("JPrivacyPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePrivacy,expression:"hidePrivacy"}],on:{hidePrivacy:t.hidePrivacy,setPrivacy:t.setPrivacy}}):t._e()],1)],1)};gt._withStripped=!0;var bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[o("li",{on:{click:function(e){return t.$emit("openUploader")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-images"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.addMoreFileText))])]),t._v(" "),t.enableMood?o("li",{on:{click:function(e){return t.$emit("showMoodPicker")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-happy"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.moodText))])]):t._e(),t._v(" "),t.isMyProfile?o("li",{on:{click:function(e){return t.$emit("showPrivacy")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-"+t.privacy.icon}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.privacy.title.toLowerCase()))])]):t._e()]),t._v(" "),t.isFree?t._e():o("JAction",{attrs:{isPostable:!0},on:{reset:function(e){return t.$emit("reset")},validate:function(e){return t.$emit("validate")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};bt._withStripped=!0;var yt={components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},data:()=>({currentUrl:window.joms_current_url,enableMood:a.a.get("conf.enablemood"),isMyProfile:a.a.get("settings.isMyProfile"),addMoreFileText:Object(A.a)("file.upload_button_more"),moodText:Object(A.a)("status.mood")}),computed:{isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading},privacy(){const{file:t,privacies:e}=this.$store.state;return e.find(e=>e.value===t.attachment.privacy)}}},wt=Object(G.a)(yt,bt,[],!1,null,null,null);wt.options.__file="src/views/postbox/file/JFileMiniBar.vue";var jt=wt.exports,xt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__file-composer"},[o(t.currentEditor,{ref:"editor",tag:"component",staticClass:"normal-editor",attrs:{isColorful:!1,placeholder:t.placeholder},on:{focus:t.onEditorFocus,change:t.onEditorChange}}),t._v(" "),o("JCharCount",{attrs:{num:t.numCharLeft}}),t._v(" "),t.moodId?o("JComposerAdditionInfo",{attrs:{moodId:t.moodId}}):t._e(),t._v(" "),o("div",{staticClass:"j-file-composer-toolbar"},[o("div",{staticClass:"toolbar-bg-picker"}),t._v(" "),t.isTouch?t._e():o("div",{staticClass:"toolbar-emoji"},[o("JEmoji",{on:{selectEmoji:t.selectEmoji}})],1)])],1)};xt._withStripped=!0;var Ct=o(12),Pt=o(11),$t=o(13),Jt=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"j-composer-addition-info"},[e("JMoodDisplay",{attrs:{moodId:this.moodId}}),this._v(" "),e("JLocationDisplay",{attrs:{location:this.location}})],1)};Jt._withStripped=!0;var Ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.location?o("span",{staticClass:"j-location-display"},[t._v("\n    - "+t._s(t.language("at"))+"\n    "),o("b",[t._v(t._s(t.location))])]):t._e()};Ot._withStripped=!0;var kt={props:{location:{type:String,default:""}},methods:{language:t=>Object(A.a)(t)}},St=Object(G.a)(kt,Ot,[],!1,null,null,null);St.options.__file="src/views/postbox/_components/JLocationDisplay.vue";var Et={components:{JLocationDisplay:St.exports,JMoodDisplay:o(23).a},props:{moodId:{type:String,default:""},location:{type:String,default:""}}},Lt=(o(124),Object(G.a)(Et,Jt,[],!1,null,null,null));Lt.options.__file="src/views/postbox/_components/JComposerAdditionInfo.vue";var Tt=Lt.exports,Mt=o(5),At=o.n(Mt),Dt={components:{JEditorTouchDevice:Pt.a,JComposerAdditionInfo:Tt,JCharCount:$t.a,JEmoji:Ct.a},data:()=>({charLimit:400,numchar:0,placeholder:Object(A.a)("status.file_hint")}),mounted(){this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},computed:{currentEditor:()=>"JEditorTouchDevice",isTouch(){return this.$store.state.isTouch},moodId(){return this.$store.state.file.attachment.mood},numCharLeft(){return this.$store.state.numCharLeft}},methods:{onEditorFocus(){this.$store.commit("setFree",!1)},onEditorChange({value:t,numchar:e}){this.numchar=e,this.$store.commit("file/setContent",t),this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},reset(){this.$refs.editor.reset()},selectEmoji(t){this.$refs.editor.insertEmoji(t)}}},Bt=(o(125),Object(G.a)(Dt,xt,[],!1,null,null,null));Bt.options.__file="src/views/postbox/file/JFileComposer.vue";var Nt=Bt.exports,Ft=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"j-uploader dropzone",staticStyle:{position:"relative"},on:{dragenter:t.showDropArea}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.preview,expression:"preview"}],staticClass:"joms-postbox-preview"},[o("div",{staticClass:"joms-postbox-preview-inner"}),t._v(" "),t._t("dropdown_select")],2),t._v(" "),t.dropArea?o("div",{staticClass:"joms-postbox--droparea",on:{dragleave:t.hideDropArea,drop:t.hideDropArea}},[o("div",{staticClass:"joms-postbox--droparea__inner"},[t._v("\n            "+t._s(t.config.dropAreaText)+"\n        ")])]):t._e(),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"joms-postbox-inner-panel",staticStyle:{position:"relative"}},[o("div",{staticClass:"joms-postbox-file-upload"},[o("span",[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{staticClass:"joms-icon--svg-fixed joms-icon--svg-unmodified",attrs:{href:t.currentUrl+"#joms-icon-images"}})]),t._v("\n                "+t._s(t.config.uploadAreaText)+"\n            ")])])]),t._v(" "),t._t("preview_tpl"),t._v(" "),t._t("composer")],2)};Ft._withStripped=!0;o(48);var It=o(49),Ut=o.n(It);Ut.a.autoDiscover=!1;var zt={props:{config:Object},data:()=>({currentUrl:Joomla.getOptions("com_community").current_url,files:[],preview:!1,dropArea:!1,dropzone:{}}),mounted(){const t=this.$el.querySelector(".joms-postbox-file-upload"),e=this.$el.querySelector(".joms-postbox-preview-inner"),o=this.config.fileTypes,s=new Ut.a(this.$el,{url:this.config.previewApi,createImageThumbnails:this.config.createImageThumbnails,clickable:t,addRemoveLinks:!0,maxFiles:this.config.maxFiles,maxFilesize:this.config.maxFilesize,parallelUploads:1,previewsContainer:e,acceptedFiles:o.map(t=>"."+t).join(","),dictRemoveFile:Object(A.a)("remove"),dictCancelUpload:Object(A.a)("cancel")});s.on("maxfilesexceeded",t=>{s.removeFile(t),this.showError(this.config.batch_notice||"Too many files to upload")}),s.on("addedfile",t=>{const e=t.name.split("."),i=e.pop();if(e.length<1||-1===o.indexOf(i))return s.removeFile(t),alert(this.config.file_type_not_permitted||"Error! File type is not allow. ("+t.name+")");if(t.size>1024*this.config.maxFilesize*1024){const e=Math.round(t.size/1024/1024*100);return s.removeFile(t),alert(this.config.max_upload_size_error||t.name+" is too big ("+e/100+" MB). Maximum is "+this.config.maxFilesize+" MB")}}),s.on("queuecomplete",()=>{this.setFilesChange()}),s.on("sending",()=>{this.togglePreview()}),s.on("removedfile",t=>{if(this.togglePreview(),t.xhr){var e=JSON.parse(t.xhr.response);this.deleteTempUpload([e.id]),this.setFilesChange()}}),s.on("success",t=>{const e=JSON.parse(t.xhr.response);e.error&&(alert(e.msg),s.removeFile(t))}),s.on("canceled",()=>{this.togglePreview()}),this.dropzone=s},methods:{deleteTempUpload(t){joms.ajax({func:this.config.removeTempApi||"system,ajaxDeleteTempImage",data:[t.join(",")]})},togglePreview(){this.preview=!!this.dropzone.files.length},showDropArea(){this.dropArea=!0},hideDropArea(){this.dropArea=!1},showError:At()((function(t){alert(t)}),300),setFilesChange(){const t=this.dropzone.files.filter(t=>"success"===t.status).map(t=>JSON.parse(t.xhr.response).id);this.$emit("filesChange",t)},open(){this.$el.querySelector(".joms-postbox-file-upload").click()},reset(){this.dropzone.files.forEach(t=>{this.dropzone.removeFile(t)})}}},Vt=(o(126),Object(G.a)(zt,Ft,[],!1,null,null,null));Vt.options.__file="src/views/postbox/_components/JUploader.vue";var qt=Vt.exports,Rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-dropdown mood-dropdown"},[o("ul",{staticClass:"joms-postbox-emoticon joms-list clearfix"},t._l(t.moods,(function(e){return o("li",{key:e.id,on:{click:function(o){return t.setMood(e.id)}}},[o("div",{attrs:{title:e.description}},[o("img",{staticClass:"joms-emoticon",attrs:{src:e.image}}),t._v(" "),o("span",[t._v(t._s(e.title))])])])})),0)])};Rt._withStripped=!0;var Kt={data:()=>({moods:a.a.get("moods")}),methods:{setMood(t){this.$emit("setMood",t),this.$emit("hideMoodPicker")}}},Wt=Object(G.a)(Kt,Rt,[],!1,null,null,null);Wt.options.__file="src/views/postbox/_components/JMoodPicker.vue";var Ht=Wt.exports,Gt={components:{JFileMiniBar:jt,JPrivacyPicker:mt,JFileComposer:Nt,JUploader:qt,JMoodPicker:Ht},data(){const t=Joomla.getOptions("com_community").base_url,{isProfile:e,isGroup:o,isEvent:s,isPage:i}=a.a.get("settings"),r=a.a.get("conf");let n=[],c=1;return e&&(n=r.file_activity_ext.split(","),c=r.file_sharing_activity_max),o&&(n=r.file_group_ext.split(","),c=r.file_sharing_group_max),i&&(n=r.file_page_ext.split(","),c=r.file_sharing_page_max),s&&(n=r.file_event_ext.split(","),c=r.file_sharing_event_max),{config:{maxFiles:a.a.get("conf.num_file_per_upload"),maxFilesize:c,dropAreaText:Object(A.a)("file.drop_to_upload"),uploadAreaText:Object(A.a)("file.upload_button"),previewApi:t+"index.php?option=com_community&view=files&task=multiUpload&type=activities",fileTypes:n,createImageThumbnails:!1,removeTempApi:"system,ajaxDeleteTempFile",batch_notice:Object(A.a)("file.batch_notice"),max_upload_size_error:Object(A.a)("file.max_upload_size_error").replace("##maxsize##",c),file_type_not_permitted:Object(A.a)("file.file_type_not_permitted")},composer:!1,moodPicker:!1,privacy:!1}},methods:{validate(){const t=a.a.get("conf.limitfile"),e=a.a.get("conf.uploadedfile");if(this.$store.state.file.attachment.id.length>t-e)return alert(Object(A.a)("photo.upload_limit_exceeded"));this.post()},post(){const t=Joomla.getOptions("com_community"),e=t.stream_filter_params?JSON.stringify(t.stream_filter_params):"",o=this.$store.state.file,s=[o.content,JSON.stringify(o.attachment),e];this.$store.dispatch("post",s).then(()=>{this.reset()})},showMoodPicker(){this.moodPicker=!0},hideMoodPicker(){this.moodPicker=!1},openUploader(){this.$refs.uploader.open()},showPrivacy(){this.privacy=!0},hidePrivacy(){this.privacy=!1},setPrivacy(t){this.$store.commit("file/setPrivacy",t)},onFilesChange(t){this.composer=!!t.length,this.$store.commit("setFree",!t.length),this.$store.commit("file/setFile",t),t.length||this.$store.commit("file/reset")},setMood(t){this.$store.commit("file/setMood",t)},reset(){this.$refs.composer.reset(),this.$refs.uploader.reset(),this.$store.commit("file/reset"),this.$store.commit("setFree",!0)}}},Qt=Object(G.a)(Gt,gt,[],!1,null,null,null);Qt.options.__file="src/views/postbox/file/JFile.vue";var Xt=Qt.exports,Yt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-file-wrapper joms-postbox-gif-wrapper"},[o("j-uploader",{ref:"uploader",attrs:{config:t.config},on:{filesChange:t.onFilesChange},scopedSlots:t._u([{key:"composer",fn:function(){return[t.composer?o("keep-alive",[o("JPhotoComposer",{ref:"composer"})],1):t._e()]},proxy:!0}])}),t._v(" "),o("JPhotoMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],attrs:{addmore:!1},on:{showMoodPicker:t.showMoodPicker,openUploader:t.openUploader,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.moodPicker?o("JMoodPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMoodPicker,expression:"hideMoodPicker"}],on:{hideMoodPicker:t.hideMoodPicker,setMood:t.setMood}}):t._e()],1)],1)};Yt._withStripped=!0;var Zt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-file-wrapper"},[o("j-uploader",{ref:"uploader",attrs:{config:t.config},on:{filesChange:t.onFilesChange},scopedSlots:t._u([{key:"dropdown_select",fn:function(){return[o("JDropdownSelect",{attrs:{options:t.albums},model:{value:t.albumId,callback:function(e){t.albumId=e},expression:"albumId"}})]},proxy:!0},{key:"composer",fn:function(){return[t.composer?o("keep-alive",[o("JPhotoComposer",{ref:"composer"})],1):t._e()]},proxy:!0}])}),t._v(" "),o("JPhotoMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showMoodPicker:t.showMoodPicker,openUploader:t.openUploader,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.moodPicker?o("JMoodPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMoodPicker,expression:"hideMoodPicker"}],on:{hideMoodPicker:t.hideMoodPicker,setMood:t.setMood}}):t._e()],1)],1)};Zt._withStripped=!0;var te=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__photo-composer"},[o(t.currentEditor,{ref:"editor",tag:"component",staticClass:"normal-editor",attrs:{isColorful:!1,placeholder:t.placeholder},on:{focus:t.onEditorFocus,change:t.onEditorChange}}),t._v(" "),o("JCharCount",{attrs:{num:t.numCharLeft}}),t._v(" "),t.moodId?o("JComposerAdditionInfo",{attrs:{moodId:t.moodId}}):t._e(),t._v(" "),o("div",{staticClass:"j-photo-composer-toolbar"},[o("div",{staticClass:"toolbar-bg-picker"}),t._v(" "),t.isTouch?t._e():o("div",{staticClass:"toolbar-emoji"},[o("JEmoji",{on:{selectEmoji:t.selectEmoji}})],1)])],1)};te._withStripped=!0;var ee={components:{JEmoji:Ct.a,JEditorTouchDevice:Pt.a,JCharCount:$t.a,JComposerAdditionInfo:Tt},data:()=>({charLimit:+a.a.get("conf.statusmaxchar"),numchar:0,placeholder:Object(A.a)("status.photo_hint")}),mounted(){this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},computed:{currentEditor:()=>"JEditorTouchDevice",isTouch(){return this.$store.state.isTouch},moodId(){return this.$store.state.photo.attachment.mood},numCharLeft(){return this.$store.state.numCharLeft}},methods:{onEditorFocus(){this.$store.commit("setFree",!1)},onEditorChange({value:t,numchar:e}){this.numchar=e,this.$store.commit("photo/setContent",t),this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},reset(){this.$refs.editor.reset()},selectEmoji(t){this.$refs.editor.insertEmoji(t)}}},oe=(o(127),Object(G.a)(ee,te,[],!1,null,null,null));oe.options.__file="src/views/postbox/photo/JPhotoComposer.vue";var se=oe.exports,ie=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[t.addmore?o("li",{on:{click:function(e){return t.$emit("openUploader")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-images"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v("add more photos")])]):t._e(),t._v(" "),o("li",{on:{click:function(e){return t.$emit("showMoodPicker")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-happy"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v("mood")])])]),t._v(" "),t.isFree?t._e():o("JAction",{attrs:{isPostable:t.isPostable},on:{reset:function(e){return t.$emit("reset")},validate:function(e){return t.$emit("validate")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};ie._withStripped=!0;var ae={components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},props:{addmore:{type:Boolean,default:!0}},data:()=>({currentUrl:Joomla.getOptions("com_community").current_url}),computed:{isPostable(){const t=this.$store.state.photo.attachment.id.length,e=this.$store.state.numCharLeft;return!!t&&e>-1},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading}}},re=Object(G.a)(ae,ie,[],!1,null,null,null);re.options.__file="src/views/postbox/photo/JPhotoMiniBar.vue";var ne=re.exports,ce=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-dropdown-select"},[t.current?o("span",{on:{click:t.toggleDropdown}},[t._v(t._s(t.current.text))]):o("span",{on:{click:t.toggleDropdown}},[t._v(t._s(t.placeholder))]),t._v(" "),o("ul",{directives:[{name:"show",rawName:"v-show",value:t.showDropdown,expression:"showDropdown"}],staticClass:"joms-list"},t._l(t.options,(function(e){return o("li",{key:e.value,on:{click:function(o){return t.setValue(e)}}},[o("p",{staticStyle:{margin:"0"}},[t._v(t._s(e.text))]),t._v(" "),o("small",[t._v(t._s(e.sub))])])})),0),t._v(" "),o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-arrow-down"}})])])};ce._withStripped=!0;var le={props:{options:Array,value:String,placeholder:String},data:()=>({currentUrl:Joomla.getOptions("com_community").current_url,showDropdown:!1}),computed:{current(){return this.options.find(t=>this.value===t.value)}},methods:{toggleDropdown(){this.showDropdown=!this.showDropdown},setValue(t){this.toggleDropdown(),this.current&&this.current.value===t.value||this.$emit("input",t.value)}}},me=(o(128),Object(G.a)(le,ce,[],!1,null,null,null));me.options.__file="src/views/postbox/_components/JDropdownSelect.vue";var de=me.exports,pe={components:{JUploader:qt,JDropdownSelect:de,JPhotoComposer:se,JPhotoMiniBar:ne,JMoodPicker:Ht},data(){const t=Joomla.getOptions("com_community").base_url,{maxuploadsize:e,num_photo_per_upload:o,limitphoto:s,uploadedphoto:i}=a.a.get("conf"),{isGroup:r,isEvent:n,isPage:c}=a.a.get("settings");let l=t+"index.php?option=com_community&view=photos&task=ajaxPreview";return r&&(l+="&no_html=1&tmpl=component&groupid="+(a.a.get("groupid")||"")),n&&(l+="&no_html=1&tmpl=component&eventid="+(a.a.get("eventid")||"")),c&&(l+="&no_html=1&tmpl=component&pageid="+(a.a.get("pageid")||"")),{config:{maxFiles:o,maxFilesize:e,dropAreaText:Object(A.a)("photo.drop_to_upload"),uploadAreaText:Object(A.a)("photo.upload_button"),previewApi:l,fileTypes:["png","jpg","jpeg"],createImageThumbnails:!0,batch_notice:Object(A.a)("photo.batch_notice"),max_upload_size_error:Object(A.a)("photo.max_upload_size_error"),file_type_not_permitted:Object(A.a)("file.file_type_not_permitted")},composer:!1,moodPicker:!1}},computed:{albums(){return this.$store.state.photo.albums},albumId:{get(){return this.$store.state.photo.attachment.album_id},set(t){this.$store.commit("photo/setAlbum",t)}}},methods:{setMood(t){this.$store.commit("photo/setMood",t)},reset(){this.$refs.composer.reset(),this.$refs.uploader.reset(),this.$store.commit("photo/reset"),this.$store.commit("setFree",!0)},validate(){const t=a.a.get("conf.limitphoto"),e=a.a.get("conf.uploadedphoto");if(this.$store.state.photo.attachment.id.length>t-e)return alert(Object(A.a)("photo.upload_limit_exceeded"));this.post()},post(){const t=Joomla.getOptions("com_community"),e=t.stream_filter_params?JSON.stringify(t.stream_filter_params):"",o=this.$store.state.photo,s=[o.content,JSON.stringify(o.attachment),e];this.$store.dispatch("post",s).then(()=>{this.reset()})},showMoodPicker(){this.moodPicker=!0},openUploader(){this.$refs.uploader.open()},hideMoodPicker(){this.moodPicker=!1},onFilesChange(t){this.composer=!!t.length,this.$store.commit("setFree",!t.length),this.$store.commit("photo/setPhoto",t),t.length||this.$store.commit("photo/reset")},setAlbum(t){this.$store.commit("photo/setAlbum",t)}}},ue=Object(G.a)(pe,Zt,[],!1,null,null,null);ue.options.__file="src/views/postbox/photo/JPhoto.vue";var ve=ue.exports,he={extends:ve,data(){const t=Joomla.getOptions("com_community").base_url;return{config:{maxFiles:1,dropAreaText:Object(A.a)("photo.drop_to_upload"),uploadAreaText:Object(A.a)("photo.gif_upload_button"),previewApi:t+"index.php?option=com_community&view=photos&task=ajaxPreview&gifanimation=1",fileTypes:["gif"],createImageThumbnails:!0},composer:!1,moodPicker:!1}}},_e=(o(129),Object(G.a)(he,Yt,[],!1,null,null,null));_e.options.__file="src/views/postbox/photo/JGif.vue";var fe=_e.exports,ge=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-poll"},[o("div",{staticClass:"joms-postbox-poll-inner"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"poll-title",attrs:{type:"text",placeholder:t.pollTitleHint},domProps:{value:t.title},on:{focus:t.onFocus,input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"joms-postbox-poll-inner"},[o("JPollOptions"),t._v(" "),o("JPollSettings"),t._v(" "),o("JDropdownSelect",{staticClass:"joms-postbox-poll-category",attrs:{options:t.categories,placeholder:"Please select category"},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}}),t._v(" "),o("JPollTime",{ref:"timer"})],1),t._v(" "),o("JPollMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showPrivacy:t.showPrivacy,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.privacy?o("JPrivacyPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePrivacy,expression:"hidePrivacy"}],on:{hidePrivacy:t.hidePrivacy,setPrivacy:t.setPrivacy}}):t._e()],1)],1)};ge._withStripped=!0;var be=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-poll-options"},[o("div",{staticClass:"joms-postbox__poll-option-list"},t._l(t.options,(function(e,s){return o("div",{key:s,staticClass:"joms-postbox__poll-option"},[o("input",{staticClass:"input-option poll_option",attrs:{type:"text",placeholder:t.pollOptionHint,maxlength:"100"},domProps:{value:e},on:{input:function(e){return t.updateOption(s,e.target.value)}}}),t._v(" "),o("a",{staticClass:"joms-postbox-poll__remove-option",attrs:{href:"javascript:;"},on:{click:function(e){return t.removeOption(s)}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 16"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-close"}})])])])})),0),t._v(" "),o("a",{staticClass:"joms-postbox-poll__add-option",attrs:{href:"javascript:;"},on:{click:t.addOption}},[t._v(t._s(t.addOptionText))])])};be._withStripped=!0;var ye={data:()=>({currentUrl:Joomla.getOptions("com_community").current_url,pollOptionHint:Object(A.a)("poll.hint_add_option"),addOptionText:Object(A.a)("poll.add_option")}),computed:{options(){return this.$store.state.poll.attachment.options}},methods:{updateOption(t,e){this.$store.commit("poll/updateOption",{index:t,value:e})},addOption(){this.$store.commit("poll/addOption"),setTimeout(()=>{this.$el.querySelector(".joms-postbox__poll-option-list").lastChild.querySelector("input").focus()})},removeOption(t){this.$store.commit("poll/removeOption",t)}}},we=Object(G.a)(ye,be,[],!1,null,null,null);we.options.__file="src/views/postbox/poll/JPollOptions.vue";var je=we.exports,xe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"settings-item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.allowMultiple,expression:"allowMultiple"}],attrs:{id:"joms-allow-multiple-checkbox",type:"checkbox"},domProps:{checked:Array.isArray(t.allowMultiple)?t._i(t.allowMultiple,null)>-1:t.allowMultiple},on:{change:function(e){var o=t.allowMultiple,s=e.target,i=!!s.checked;if(Array.isArray(o)){var a=t._i(o,null);s.checked?a<0&&(t.allowMultiple=o.concat([null])):a>-1&&(t.allowMultiple=o.slice(0,a).concat(o.slice(a+1)))}else t.allowMultiple=i}}}),t._v(" "),o("label",{staticClass:"settings-item--label",staticStyle:{cursor:"pointer"},attrs:{for:"joms-allow-multiple-checkbox"}},[t._v("\n        "+t._s(t.allowMultiChoicesText)+"\n    ")])])};xe._withStripped=!0;var Ce={data:()=>({allowMultiChoicesText:Object(A.a)("poll.allow_multiple_choices")}),computed:{allowMultiple:{get(){return this.$store.state.poll.attachment.settings.allow_multiple},set(t){this.$store.commit("poll/setMultiple",t)}}}},Pe=(o(130),Object(G.a)(Ce,xe,[],!1,null,null,null));Pe.options.__file="src/views/postbox/poll/JPollSettings.vue";var $e=Pe.exports,Je=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__poll-time"},[o("div",{staticClass:"joms-postbox__poll-time--inner"},[o("span",[t._v(t._s(t.expiryDateText)+" "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("VueDateTime",{attrs:{type:"date","input-id":"joms-postbox-poll-expiry-date","input-class":"joms-input","min-datetime":t.now,placeholder:t.expiryDateHintText},on:{input:t.setExpiryDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),o("div",{staticClass:"joms-postbox__poll-time--inner"},[o("span",[t._v(t._s(t.expiryTimeText)+" "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("VueDateTime",{attrs:{"use12-hour":"",type:"time","input-id":"joms-postbox-poll-expiry-time","input-class":"joms-input",format:t.timeFormat,placeholder:t.expiryTimeHintText},on:{input:t.setExpiryTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)])};Je._withStripped=!0;o(41);var Oe=o(42),ke=o(17),Se={components:{VueDateTime:Oe.Datetime},data:()=>({now:(new Date).toISOString(),timeFormat:ke.DateTime.TIME_SIMPLE,date:"",time:"",expiryDateText:Object(A.a)("poll.expired_date"),expiryDateHintText:Object(A.a)("poll.expired_date_hint"),expiryTimeText:Object(A.a)("poll.expired_time"),expiryTimeHintText:Object(A.a)("poll.expired_time_hint")}),methods:{setExpiryDate(t){if(!t)return;const e=ke.DateTime.fromISO(t),o=e.toISODate(),s=e.toFormat("dd MMMM yyyy");this.$store.commit("poll/setExpiryDate",[o,s])},setExpiryTime(t){if(!t)return;const e=ke.DateTime.fromISO(t),o=e.toLocaleString(ke.DateTime.TIME_SIMPLE),s=e.toLocaleString(ke.DateTime.TIME_24_SIMPLE);this.$store.commit("poll/setExpiryTime",[s,o])},reset(){this.date="",this.time=""}}},Ee=Object(G.a)(Se,Je,[],!1,null,null,null);Ee.options.__file="src/views/postbox/poll/JPollTime.vue";var Le=Ee.exports,Te=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[t.isMyProfile?o("li",{on:{click:function(e){return t.$emit("showPrivacy")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-"+t.privacy.icon}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.privacy.title.toLowerCase()))])]):t._e(),t._v(" "),o("li",{staticClass:"joms-minibar-spacer",staticStyle:{visibility:"hidden"}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-pencil"}})])])]),t._v(" "),t.isFree?t._e():o("JAction",{ref:"action",attrs:{isPostable:t.isPostable},on:{validate:function(e){return t.$emit("validate")},reset:function(e){return t.$emit("reset")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};Te._withStripped=!0;var Me={components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},data(){const t=Joomla.getOptions("com_community").current_url,{isMyProfile:e}=a.a.get("settings");return{currentUrl:t,isMyProfile:e}},computed:{isPostable(){return!!this.$store.state.poll.content},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading},privacy(){const{poll:t,privacies:e}=this.$store.state;return e.find(e=>e.value===t.attachment.privacy)}}},Ae=Object(G.a)(Me,Te,[],!1,null,null,null);Ae.options.__file="src/views/postbox/poll/JPollMiniBar.vue";var De=Ae.exports,Be=function(t,e,o){return function t(e,o,s){if(!e||!e.length)return[];o||(o="0"),s||(s="");let i=[];for(let a,r,n=0;n<e.length;n++)e[n].parent===o&&(a=e[n].id,r=s+e[n].name,i.push({id:a,name:r}),i=i.concat(t(e,a,r+" â€º ")));return i}(t,e,o)},Ne={components:{JPollOptions:je,JPollSettings:$e,JDropdownSelect:de,JPollTime:Le,JPollMiniBar:De,JPrivacyPicker:mt},data:()=>({categories:Be(a.a.get("pollCategories")).map(t=>({value:t.id,text:"Category: "+t.name})),privacy:!1,pollTitleHint:Object(A.a)("poll.title_hint")}),computed:{title:{get(){return this.$store.state.poll.content},set(t){this.$store.commit("poll/setContent",t)}},categoryId:{get(){return this.$store.state.poll.attachment.catid},set(t){this.$store.commit("poll/setCategory",t)}}},methods:{validate(){const{poll:t}=this.$store.state,{content:e,attachment:o}=t;if(o.options.length<2)return alert("must have at least 2 options");return o.options.some(t=>!t.trim().length)?alert("option must not empty"):o.catid?o.polltime.enddate.length?o.polltime.endtime.length?void this.post():alert("missing time"):alert("missing date"):alert("missing category")},post(){const t=Joomla.getOptions("com_community"),e=t.stream_filter_params?JSON.stringify(t.stream_filter_params):"",o=this.$store.state.poll,s=[o.content,JSON.stringify(o.attachment),e];this.$store.dispatch("post",s).then(t=>{t[0]&&"ajax_calls"===t[0][1]&&t[1]&&t[1][1]&&"__throwError"===t[1][1]||this.reset()})},onFocus(){this.$store.commit("setFree",!1)},showPrivacy(){this.privacy=!0},hidePrivacy(){this.privacy=!1},setPrivacy(t){this.$store.commit("poll/setPrivacy",t)},reset(){this.$refs.timer.reset(),this.$store.commit("poll/reset"),this.$store.commit("setFree",!0)}}},Fe=(o(131),Object(G.a)(Ne,ge,[],!1,null,null,null));Fe.options.__file="src/views/postbox/poll/JPoll.vue";var Ie=Fe.exports,Ue=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-status"},[o("JUrlPreview",{attrs:{data:t.preview},on:{removePreview:t.removePreview}}),t._v(" "),o("JStatusComposer",{ref:"composer",on:{urlAppear:t.urlAppear}}),t._v(" "),o("JStatusMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],on:{showMoodPicker:t.showMoodPicker,showLocation:t.showLocation,showPrivacy:t.showPrivacy,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.moodPicker?o("JMoodPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMoodPicker,expression:"hideMoodPicker"}],on:{hideMoodPicker:t.hideMoodPicker,setMood:t.setMood}}):t._e()],1),t._v(" "),o("keep-alive",[t.location?o("JLocationPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideLocation,expression:"hideLocation"}],attrs:{locationName:t.locationName},on:{setLocation:t.setLocation,removeLocation:t.removeLocation}}):t._e()],1),t._v(" "),o("keep-alive",[t.privacy?o("JPrivacyPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePrivacy,expression:"hidePrivacy"}],on:{hidePrivacy:t.hidePrivacy,setPrivacy:t.setPrivacy}}):t._e()],1)],1)};Ue._withStripped=!0;var ze=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__status-composer",style:t.composerStyle},[o(t.currentEditor,{ref:"editor",tag:"component",class:t.editorClass,attrs:{bg:t.bg,isColorful:t.isColorful,placeholder:t.placeholder},on:{focus:t.onEditorFocus,change:t.onEditorChange}}),t._v(" "),o("JCharCount",{attrs:{num:t.numCharLeft}}),t._v(" "),t.moodId||t.location?o("JComposerAdditionInfo",{attrs:{moodId:t.moodId,location:t.location}}):t._e(),t._v(" "),o("div",{staticClass:"j-status-composer-toolbar"},[o("div",{staticClass:"toolbar-bg-picker"},[t.bg.id?o("JStatusBackgroundPicker",{directives:[{name:"show",rawName:"v-show",value:!t.hideColorPicker,expression:"!hideColorPicker"}],on:{setBg:t.setBg}}):t._e()],1),t._v(" "),t.isTouch?t._e():o("div",{staticClass:"toolbar-emoji"},[o("JEmoji",{on:{selectEmoji:t.selectEmoji}})],1)])],1)};ze._withStripped=!0;var Ve=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"j-status-background-picker colorful-status__color"},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.showDirection,expression:"showDirection"}],staticClass:"joms-direction joms-left",on:{click:t.scrollLeft}},[o("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),t._v(" "),o("ul",{staticClass:"colorful-status__color-list"},t._l(t.bgs,(function(e){return o("li",{key:e.id,staticClass:"colorful-status__color-selector",class:e.class,style:e.style,attrs:{title:e.title},on:{click:function(o){return t.setBg(e.id)}}})})),0),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.showDirection,expression:"showDirection"}],staticClass:"joms-direction joms-right",on:{click:t.scrollRight}},[o("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])])};Ve._withStripped=!0;var qe=o(132),Re=o.n(qe),Ke={data:()=>({showDirection:!1,range:200}),mounted(){const t=this.$el.querySelector(".colorful-status__color-list");t.offsetWidth<t.scrollWidth&&(this.showDirection=!0);this.$store.state.isTouch&&window.innerWidth<600&&(t.style.overflowX="auto",this.range=100)},computed:{bgs(){const t=JSON.parse(JSON.stringify(this.$store.state.bgs)),e=this.$store.state.status.attachment.bgid;return t.map(t=>(t.class={active:t.id===e},t.style={backgroundImage:t.thumbnail?"url("+t.thumbnail+")":""},t)),t}},methods:{setBg(t){this.$store.commit("status/setBg",t),this.$emit("setBg",t)},scrollLeft(){const t=this.$el.querySelector(".colorful-status__color-list");Re()([t.scrollLeft-this.range,null],{elementToScroll:t})},scrollRight(){const t=this.$el.querySelector(".colorful-status__color-list");Re()([t.scrollLeft+this.range,null],{elementToScroll:t})}}},We=(o(133),Object(G.a)(Ke,Ve,[],!1,null,null,null));We.options.__file="src/views/postbox/status/JStatusBackgroundPicker.vue";var He={components:{JStatusBackgroundPicker:We.exports,JEditorTouchDevice:Pt.a,JCharCount:$t.a,JEmoji:Ct.a,JComposerAdditionInfo:Tt},data:()=>({charLimit:+a.a.get("conf.statusmaxchar"),numchar:0,savedBg:"0",bgPicker:!0,urlAppeared:!1,placeholder:Object(A.a)("status.status_hint")}),mounted(){this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},computed:{currentEditor:()=>"JEditorTouchDevice",isTouch(){return this.$store.state.isTouch},isColorful(){return this.$store.state.status.attachment.colorful},hasUrlPreview(){return!!this.$store.state.status.attachment.fetch.length},hideColorPicker(){if(this.hasUrlPreview)return!0;return this.$store.state.status.content.split("\n").length>4||this.numchar>160},editorClass(){return{"colorful-editor":this.isColorful,"normal-editor":!this.isColorful}},bg(){const t=this.$store.state.bgs;if(!t.length)return{};const e=this.$store.state.status.attachment.bgid;return t.find(t=>t.id===e)},moodId(){return this.$store.state.status.attachment.mood},location(){const t=this.$store.state.status.attachment.location;return t.length?t[0]:""},composerStyle(){return this.bg?{backgroundImage:this.bg.image?"url("+this.bg.image+")":"",color:this.bg.textcolor?"#"+this.bg.textcolor:""}:{}},numCharLeft(){return this.$store.state.numCharLeft}},watch:{hideColorPicker(t){t&&"0"!==this.savedBg?this.$store.commit("status/setBg","0"):t||"0"===this.savedBg||this.$store.commit("status/setBg",this.savedBg)}},methods:{onEditorFocus(){this.$store.commit("setFree",!1)},onEditorChange({value:t,numchar:e}){this.numchar=e,this.$store.commit("status/setContent",t),this.$store.commit("setNumCharLeft",this.charLimit-this.numchar),this.urlAppeared||this.isColorful||this.fetchUrlPreview(t)},fetchUrlPreview:At()((function(t){const e=t.match(/\s?((http|https):\/\/[a-z0-9-]+\.[a-z0-9-]+\S+)/);e&&(this.urlAppeared=!0,this.$emit("urlAppear",e[1]))}),300),reset(){this.savedBg="0",this.urlAppeared=!1,this.$refs.editor.reset()},setBg(t){this.savedBg=t,this.isTouch||this.$refs.editor.focus()},selectEmoji(t){this.$refs.editor.insertEmoji(t)}}},Ge=(o(134),Object(G.a)(He,ze,[],!1,null,null,null));Ge.options.__file="src/views/postbox/status/JStatusComposer.vue";var Qe=Ge.exports,Xe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[t.enablemood?o("li",{on:{click:function(e){return t.$emit("showMoodPicker")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-happy"}})])]):t._e(),t._v(" "),t.enablelocation?o("li",{on:{click:function(e){return t.$emit("showLocation")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-location"}})])]):t._e(),t._v(" "),t.isMyProfile?o("li",{on:{click:function(e){return t.$emit("showPrivacy")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-"+t.privacyIcon}})])]):t._e(),t._v(" "),t._l(t.tabs,(function(e){return o("li",{key:e.name,attrs:{title:e.title},on:{click:function(o){return t.setActiveTab(e)}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:e.icon}})])])}))],2),t._v(" "),t.isFree?t._e():o("JAction",{attrs:{isPostable:t.isPostable},on:{reset:function(e){return t.$emit("reset")},validate:function(e){return t.$emit("validate")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};Xe._withStripped=!0;var Ye={components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},data(){const t=window.joms_current_url,{enablemood:e,enablelocation:o,enablephotos:s,enablephotosgif:i,enablevideos:r,enableevents:n,enablefiles:c,enablepolls:l,enablecustoms:m}=a.a.get("conf"),{isAdmin:d,isMyProfile:p,isProfile:u,isGroup:v,isEvent:h,isPage:_}=a.a.get("settings"),f=[];return(u||v||h||_)&&s&&(f.push({name:"photo",title:Object(A.a)("postbox.status"),icon:window.joms_current_url+"#joms-icon-camera"}),i&&f.push({name:"gif",title:Object(A.a)("postbox.gif"),icon:window.joms_current_url+"#joms-icon-images"})),(u||v||h||_)&&r&&f.push({name:"video",title:Object(A.a)("postbox.video"),icon:window.joms_current_url+"#joms-icon-play"}),(u||v||_)&&n&&f.push({name:"event",title:Object(A.a)("postbox.event"),icon:window.joms_current_url+"#joms-icon-calendar"}),(u||v||h||_)&&c&&f.push({name:"file",title:Object(A.a)("postbox.file"),icon:window.joms_current_url+"#joms-icon-file-zip"}),(u||v||h||_)&&l&&f.push({name:"poll",title:Object(A.a)("postbox.poll"),icon:window.joms_current_url+"#joms-icon-list"}),d&&m&&f.push({name:"custom",title:Object(A.a)("postbox.custom"),icon:window.joms_current_url+"#joms-icon-bullhorn"}),{currentUrl:t,enablemood:e,enablelocation:o,isMyProfile:p,tabs:f}},computed:{isPostable(){const t=this.$store.state.status.content.trim(),e=this.$store.state.numCharLeft;return!!t&&e>-1},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading},privacyIcon(){const{status:t,privacies:e}=this.$store.state;return e.find(e=>e.value===t.attachment.privacy).icon}},methods:{setActiveTab(t){this.$emit("reset"),this.$store.commit("setActiveTab",t.name),this.$store.commit("setFree",!0)}}},Ze=Object(G.a)(Ye,Xe,[],!1,null,null,null);Ze.options.__file="src/views/postbox/status/JStatusMiniBar.vue";var to=Ze.exports,eo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-dropdown location-dropdown"},[o("div",{staticClass:"joms-postbox-map",staticStyle:{height:"110px"}},[o(t.map,{ref:"map",tag:"component",attrs:{latLon:t.latLon},on:{mapLoaded:t.setMapLoaded}})],1),t._v(" "),o("div",{staticClass:"joms-postbox-action joms-location-action",staticStyle:{"z-index":"999"}},[t.selectedLocation.name&&t.value?o("button",{staticClass:"joms-postbox-select joms-button--primary",on:{click:t.setLocation}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-location"}})]),t._v("\n            "+t._s(t.language("geolocation.select_button"))+"\n        ")]):t._e(),t._v(" "),t.locationName?o("button",{staticClass:"joms-postbox-remove joms-button--neutral",on:{click:t.removeLocation}},[t._v(t._s(t.language("remove")))]):t._e()]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"joms-postbox-keyword joms-input",attrs:{type:"text",placeholder:t.language("geolocation.loaded"),disabled:!t.mapLoaded},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.onInputLocationSearch]}}),t._v(" "),o("ul",{staticClass:"joms-postbox-locations",staticStyle:{height:"160px","overflow-y":"auto"}},[t.loading?o("li",[o("em",[t._v(t._s(t.language("geolocation.loading")))])]):t._e(),t._v(" "),t.locations.length||t.loading?t._e():o("li",[o("em",[t._v(t._s(t.language("geolocation.error")))])]),t._v(" "),t._l(t.locations,(function(e){return o("li",{key:e.id,on:{click:function(o){return t.selectLocation(e)}}},[o("p",[t._v(t._s(e.name))]),t._v(" "),o("span",[t._v(t._s(e.sub))])])}))],2)])};function oo(t,e){return Array.isArray(t)?so(t,e):function(t,e){if(Array.isArray(t))return so(t,e);return new Promise((o,s)=>{var i={query:t};new google.maps.places.PlacesService(e).textSearch(i,(function(t,e){e!==google.maps.places.PlacesServiceStatus.OK&&o([]),o(t.map(t=>({id:t.place_id,name:t.name,sub:t.formatted_address,lat:t.geometry.location.lat(),lon:t.geometry.location.lng()})))}))})}(t,e)}function so(t,e){const o={location:new google.maps.LatLng(t[0],t[1]),radius:100};return new Promise((t,s)=>{new google.maps.places.PlacesService(e).nearbySearch(o,(e,o)=>{o!==google.maps.places.PlacesServiceStatus.OK&&t([]),t(e.map(t=>({id:t.place_id,name:t.name,sub:t.vicinity,lat:t.geometry.location.lat(),lon:t.geometry.location.lng()})))})})}eo._withStripped=!0;var io={searchNearby:(t,e)=>"undefined"!=typeof google?oo(t,e):function(t,e){return new Promise((o,s)=>{const i=setInterval(()=>{"undefined"!=typeof google&&(clearInterval(i),oo(t,e).then(t=>{o(t)}))},500)})}(t,e)},ao={searchNearby(t){const e="https://nominatim.openstreetmap.org/search?q="+(Array.isArray(t)?t.join(","):t)+"&format=json";return new Promise((t,o)=>{jQuery.getJSON(e).done(e=>{const o=e.map(t=>({id:t.place_id,name:t.display_name,sub:t.display_name,lat:+t.lat,lon:+t.lon}));t(o)})})}};const ro="openstreetmap"===window.joms_maps_api,no=ro?ao:io,{searchNearby:co}=no;var lo={components:{JLocationOpenStreet:()=>Promise.all([o.e(6),o.e(3)]).then(o.bind(null,164)),JLocationGoogle:()=>o.e(1).then(o.bind(null,165))},props:{locationName:{type:String,default:""}},data(){const t=ro?"JLocationOpenStreet":"JLocationGoogle";return{mapLoaded:!1,currentUrl:window.joms_current_url,map:t,value:"",yourLocation:[51.5,-.09],locations:[],loading:!1,selectedLocation:{name:"",lat:"",lon:""}}},computed:{latLon(){return[this.selectedLocation.lat?this.selectedLocation.lat:51.5,this.selectedLocation.lon?this.selectedLocation.lon:-.09]}},watch:{mapLoaded(){this.autoDetectLocation()}},methods:{language:t=>Object(A.a)(t),autoDetectLocation(){this.loading=!0,window.navigator.geolocation.getCurrentPosition(t=>{const e=[t.coords.latitude,t.coords.longitude];this.detectLocationSuccess(e)},()=>this.detectLocationFail(),{enableHighAccuracy:!0,timeout:1e4})},detectLocationSuccess(t){s.a.set(this,"yourLocation",t),s.a.set(this,"selectedLocation",{name:"",lat:t[0],lon:t[1]});const e=this.$refs.map.map;co(t,e).then(t=>{s.a.set(this,"locations",t),this.loading=!1})},detectLocationFail(){this.lookUpLocationByIp().then(t=>this.detectLocationSuccess(t))},lookUpLocationByIp:()=>new Promise((t,e)=>{jQuery.getJSON("https://extreme-ip-lookup.com/json/").done(e=>{"success"!==e.status&&alert("Error when detect location, please turn on location on browser."),t([e.lat,e.lon])})}),onInputLocationSearch(){s.a.set(this,"locations",[]),this.loading=!0,this.debounceSearch()},debounceSearch:At()((function(){const t=this.value?this.value:this.yourLocation,e=this.$refs.map.map;co(t,e).then(t=>{s.a.set(this,"locations",t),this.loading=!1})}),300),selectLocation(t){this.value=t.name,s.a.set(this,"selectedLocation",{name:t.name,lat:t.lat,lon:t.lon})},setLocation(){this.$emit("setLocation",this.selectedLocation)},removeLocation(){this.value="",this.$emit("removeLocation")},setMapLoaded(){this.mapLoaded=!0}}},mo=(o(135),Object(G.a)(lo,eo,[],!1,null,null,null));mo.options.__file="src/views/postbox/_components/JLocationPicker.vue";var po=mo.exports,uo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.data.title?o("div",{staticClass:"joms-postbox-fetched"},[o("div",{staticClass:"joms-postbox-inner-panel"},[o("div",{staticStyle:{position:"relative"}},[t.data.title?o("div",{staticClass:"joms-fetched-container"},[t.data.image?o("div",{staticClass:"joms-fetched-images"},[o("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.data.image}})]):t._e(),t._v(" "),o("div",{staticClass:"joms-fetched-field joms-fetched-title"},[o("span",{staticStyle:{"font-weight":"bold",display:"inline"}},[t._v(t._s(t.data.title))])]),t._v(" "),t.data.desc?o("div",{staticClass:"joms-fetched-field joms-fetched-description"},[o("span",{staticStyle:{display:"inline"}},[t._v(t._s(t.data.desc))])]):t._e()]):t._e(),t._v(" "),o("div",{staticClass:"clearfix"}),t._v(" "),o("span",{staticClass:"joms-fetched-close",staticStyle:{top:"0"},on:{click:t.removePreview}},[o("i",{staticClass:"joms-icon-remove"}),t._v("cancel\n            ")])])])]):t._e()};uo._withStripped=!0;var vo={props:{data:{type:Object,default:()=>({url:"",title:"",desc:"",image:""})}},methods:{removePreview(){this.$emit("removePreview")}}},ho=(o(136),Object(G.a)(vo,uo,[],!1,null,null,null));ho.options.__file="src/views/postbox/_components/JUrlPreview.vue";var _o=ho.exports,fo=o(137),go=o.n(fo),bo={components:{JStatusComposer:Qe,JStatusMiniBar:to,JMoodPicker:Ht,JLocationPicker:po,JPrivacyPicker:mt,JUrlPreview:_o},data:()=>({moodPicker:!1,location:!1,privacy:!1,preview:{url:"",title:"",desc:"",image:""}}),computed:{locationName(){const t=this.$store.state.status.attachment.location;return 3===t.length?t[0]:""}},methods:{validate(){this.post()},post(){const t=Joomla.getOptions("com_community"),e=this.$store.state.status,o=[e.content,JSON.stringify(e.attachment)];if(t.stream_filter_params){const e=JSON.stringify(t.stream_filter_params);o.push(e)}this.$store.dispatch("post",o).then(()=>{this.reset()})},showMoodPicker(){this.moodPicker=!0},hideMoodPicker(){this.moodPicker=!1},showLocation(){this.location=!0},hideLocation(){this.location=!1},showPrivacy(){this.privacy=!0},hidePrivacy(){this.privacy=!1},reset(){this.resetPreview(),this.$refs.composer.reset(),this.$store.commit("status/reset"),this.$store.commit("setFree",!0)},setPrivacy(t){this.$store.commit("status/setPrivacy",t)},setMood(t){this.$store.commit("status/setMood",t)},setLocation(t){this.$store.commit("status/setLocation",t),this.hideLocation()},removeLocation(){this.$store.commit("status/setLocation",""),this.hideLocation()},urlAppear(t){this.$store.commit("setLoading",!0),joms.ajax({func:"system,ajaxGetFetchUrl",data:[t],callback:e=>{const o=(e.image||[]).concat(e["og:image"]||[]);this.preview.image=o.length?o[0]:"",this.preview.url=t,this.preview.title=go()(e.title)||t,this.preview.desc=go()(e.description)||"",this.setPreview(this.preview),this.$store.commit("setLoading",!1)}})},setPreview(t){this.$store.commit("status/setPreview",t)},removePreview(){this.resetPreview(),this.$store.commit("status/setPreview",!1)},resetPreview(){this.preview.url="",this.preview.title="",this.preview.desc="",this.preview.image=""}}},yo=Object(G.a)(bo,Ue,[],!1,null,null,null);yo.options.__file="src/views/postbox/status/JStatus.vue";var wo=yo.exports,jo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox-video"},[o("div",{staticClass:"joms-postbox-video--inner",on:{dragenter:t.showDropArea}},[t.type&&"upload"!==t.type?t._e():o("JVideoUpload",{ref:"uploader",attrs:{dropArea:t.dropArea},on:{typeChange:t.setType,hideDropArea:t.hideDropArea,reset:t.reset}}),t._v(" "),t.type?t._e():o("div",{staticClass:"joms-postbox-video-spacer"},[t._v(t._s(t.orText))]),t._v(" "),t.type&&"fetch"!==t.type?t._e():o("JVideoFetcher",{ref:"fetcher",attrs:{videoType:t.type},on:{typeChange:t.setType,reset:t.reset}})],1),t._v(" "),o("JVideoMiniBar",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.free,expression:"!$store.state.free"}],attrs:{videoType:t.type},on:{showMoodPicker:t.showMoodPicker,showLocation:t.showLocation,showPrivacy:t.showPrivacy,reset:t.reset,validate:t.validate}}),t._v(" "),o("keep-alive",[t.moodPicker?o("JMoodPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMoodPicker,expression:"hideMoodPicker"}],on:{hideMoodPicker:t.hideMoodPicker,setMood:t.setMood}}):t._e()],1),t._v(" "),o("keep-alive",[t.location?o("JLocationPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideLocation,expression:"hideLocation"}],attrs:{locationName:t.locationName},on:{setLocation:t.setLocation,removeLocation:t.removeLocation}}):t._e()],1),t._v(" "),o("keep-alive",[t.privacy?o("JPrivacyPicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePrivacy,expression:"hidePrivacy"}],on:{hidePrivacy:t.hidePrivacy,setPrivacy:t.setPrivacy}}):t._e()],1)],1)};jo._withStripped=!0;var xo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"j-video-fetcher"},[o("div",{staticClass:"video-url video-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],class:{"on-fetcher":"fetch"===t.videoType},attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.onInput],focus:t.onFocus}})]),t._v(" "),o("JUrlPreview",{attrs:{data:t.preview},on:{removePreview:t.removePreview}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.hasVideo,expression:"hasVideo"}],staticClass:"video-category"},[o("JDropdownSelect",{attrs:{options:t.categories},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}})],1),t._v(" "),o("JVideoComposer",{directives:[{name:"show",rawName:"v-show",value:"fetch"===t.videoType,expression:"videoType === 'fetch'"}],ref:"composer"})],1)};xo._withStripped=!0;var Co=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"joms-postbox__video-composer"},[o(t.currentEditor,{ref:"editor",tag:"component",staticClass:"normal-editor",attrs:{isColorful:!1,placeholder:t.placeholder},on:{focus:t.onEditorFocus,change:t.onEditorChange}}),t._v(" "),o("JCharCount",{attrs:{num:t.numCharLeft}}),t._v(" "),t.moodId||t.location?o("JComposerAdditionInfo",{attrs:{moodId:t.moodId,location:t.location}}):t._e(),t._v(" "),o("div",{staticClass:"j-video-composer-toolbar"},[o("div",{staticClass:"toolbar-bg-picker"}),t._v(" "),t.isTouch?t._e():o("div",{staticClass:"toolbar-emoji"},[o("JEmoji",{on:{selectEmoji:t.selectEmoji}})],1)])],1)};Co._withStripped=!0;var Po={components:{JEditorTouchDevice:Pt.a,JComposerAdditionInfo:Tt,JCharCount:$t.a,JEmoji:Ct.a},data:()=>({charLimit:+a.a.get("conf.statusmaxchar"),numchar:0,placeholder:Object(A.a)("status.video_hint")}),mounted(){this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},computed:{currentEditor:()=>"JEditorTouchDevice",isTouch(){return this.$store.state.isTouch},moodId(){return this.$store.state.video.attachment.mood},numCharLeft(){return this.$store.state.numCharLeft},location(){const t=this.$store.state.video.attachment.location;return t.length?t[0]:""}},methods:{onEditorFocus(){this.$store.commit("setFree",!1)},onEditorChange({value:t,numchar:e}){this.numchar=e,this.$store.commit("video/setContent",t),this.$store.commit("setNumCharLeft",this.charLimit-this.numchar)},reset(){this.$refs.editor.reset()},selectEmoji(t){this.$refs.editor.insertEmoji(t)}}},$o=(o(140),Object(G.a)(Po,Co,[],!1,null,null,null));$o.options.__file="src/views/postbox/video/JVideoComposer.vue";var Jo=$o.exports,Oo={components:{JVideoComposer:Jo,JUrlPreview:_o,JDropdownSelect:de},props:{videoType:{type:String,default:""}},data:()=>({categories:Be(a.a.get("videoCategories")).map(t=>({value:t.id,text:"Category: "+t.name})),preview:{id:"",url:"",title:"",desc:"",image:""},urlAppeared:!1,value:"",placeholder:Object(A.a)("video.share_button")}),computed:{hasVideo(){return!!this.$store.state.video.attachment.fetch.length},categoryId:{get(){return this.$store.state.video.catid},set(t){this.$store.commit("video/setCategory",t)}}},methods:{validate(){this.post()},post(){const t=Joomla.getOptions("com_community"),e=t.stream_filter_params?JSON.stringify(t.stream_filter_params):"",o=this.$store.state.video,s=[o.content,JSON.stringify(o.attachment),e];this.$store.dispatch("post",s).then(()=>{this.$emit("reset")})},reset(){this.value="",this.urlAppeared=!1,this.resetPreview(),this.$refs.composer.reset()},onInput(){this.urlAppeared||this.fetchUrlPreview()},onFocus(){this.$store.commit("setFree",!1)},fetchUrlPreview:At()((function(){const t=this.value;t.match(/^(http|https):\/\/[a-z0-9-]+\.[a-z0-9-]+\S+$/)&&(this.urlAppeared=!0,this.$store.commit("setLoading",!0),joms.ajax({func:"videos,ajaxLinkVideoPreview",data:[t],callback:t=>{if("__throwError"===t[1][1])alert(t[1][3]);else{const e=t[1][3][0].video;this.preview.id=e.id,this.preview.image=e.thumb,this.preview.url=e.path,this.preview.title=e.title,this.preview.desc=e.description||"",this.preview.catid=e.category_id,this.$store.commit("video/setCategory",e.category_id),this.$store.commit("video/setPreview",this.preview),this.$emit("typeChange","fetch")}this.$store.commit("setLoading",!1)}}))}),300),removePreview(){this.resetPreview(),this.$store.commit("video/setPreview",!1),this.$emit("reset")},resetPreview(){this.preview.id="",this.preview.url="",this.preview.title="",this.preview.desc="",this.preview.image=""}}},ko=(o(141),Object(G.a)(Oo,xo,[],!1,null,null,null));ko.options.__file="src/views/postbox/video/JVideoFetcher.vue";var So=ko.exports,Eo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("JMiniBar",[o("ul",{staticClass:"joms-list inline"},[t.videoType&&t.enableMood?o("li",{on:{click:function(e){return t.$emit("showMoodPicker")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-happy"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v("mood")])]):t._e(),t._v(" "),t.videoType&&t.enableLocation?o("li",{on:{click:function(e){return t.$emit("showLocation")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-location"}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v("location")])]):t._e(),t._v(" "),t.isMyProfile?o("li",{on:{click:function(e){return t.$emit("showPrivacy")}}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-"+t.privacy.icon}})]),t._v(" "),o("span",{staticClass:"visible-desktop"},[t._v(t._s(t.privacy.title.toLowerCase()))])]):t._e(),t._v(" "),o("li",{staticClass:"joms-minibar-spacer",staticStyle:{visibility:"hidden"}},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{attrs:{href:t.currentUrl+"#joms-icon-pencil"}})])])]),t._v(" "),t.isFree?t._e():o("JAction",{attrs:{isPostable:t.isPostable,save:"upload"===t.videoType?"Upload":"Post"},on:{reset:function(e){return t.$emit("reset")},validate:function(e){return t.$emit("validate")}}}),t._v(" "),t.isLoading?o("JLoading"):t._e()],1)};Eo._withStripped=!0;var Lo={props:{videoType:{type:String,default:""}},components:{JMiniBar:et.a,JAction:ot.a,JLoading:st.a},data(){const t=Joomla.getOptions("com_community").current_url,{isMyProfile:e}=a.a.get("settings"),{enablemood:o,enablelocation:s}=a.a.get("conf");return{currentUrl:t,enableMood:o,enableLocation:s,isMyProfile:e}},computed:{isPostable(){if("fetch"===this.videoType){const t=!!this.$store.state.video.attachment.fetch.length,e=this.$store.state.numCharLeft;return t&&e>-1}return"upload"===this.videoType},isFree(){return this.$store.state.free},isLoading(){return this.$store.state.loading},privacy(){const{video:t,privacies:e}=this.$store.state;return e.find(e=>e.value===t.attachment.privacy)}}},To=Object(G.a)(Lo,Eo,[],!1,null,null,null);To.options.__file="src/views/postbox/video/JVideoMiniBar.vue";var Mo=To.exports,Ao=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"j-video-upload"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"joms-postbox-inner-panel",staticStyle:{position:"relative"}},[o("div",{staticClass:"joms-postbox-file-upload"},[o("svg",{staticClass:"joms-icon",attrs:{viewBox:"0 0 16 18"}},[o("use",{staticClass:"joms-icon--svg-fixed joms-icon--svg-unmodified",attrs:{href:t.currentUrl+"#joms-icon-play"}})]),t._v("\n            "+t._s(t.uploadAreaText)+"\n        ")])]),t._v(" "),o("div",{staticClass:"j-video-upload-area dropzone"},[t.dropArea?o("div",{staticClass:"joms-postbox--droparea",on:{dragleave:function(e){return t.$emit("hideDropArea")},drop:function(e){return t.$emit("hideDropArea")}}},[o("div",{staticClass:"joms-postbox--droparea__inner"},[t._v("\n                "+t._s(t.dropAreaText)+"\n            ")])]):t._e(),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.preview,expression:"preview"}],staticClass:"j-video-upload-preview"})]),t._v(" "),t.preview?o("div",{staticClass:"j-video-upload-info"},[o("div",{staticClass:"j-video-upload-category"},[o("JDropdownSelect",{attrs:{options:t.categories,placeholder:t.selectCategoryText},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}})],1),t._v(" "),o("div",{staticClass:"video-title"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:t.videoTitlePlaceholder},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),o("JVideoComposer",{ref:"composer"})],1):t._e()])};Ao._withStripped=!0,Ut.a.autoDiscover=!1;var Do={components:{JDropdownSelect:de,JVideoComposer:Jo},props:{dropArea:{type:Boolean,default:!1}},data(){const t=Joomla.getOptions("com_community").current_url;return{categories:Be(a.a.get("videoCategories")).map(t=>({value:t.id,text:"Category: "+t.name})),currentUrl:t,dropzone:{},preview:!1,title:"",uploadAreaText:Object(A.a)("video.upload_button"),dropAreaText:Object(A.a)("video.drop_to_upload"),videoTitlePlaceholder:Object(A.a)("video.upload_title"),selectCategoryText:Object(A.a)("select_category")}},mounted(){const t=this.$store.state.video,e=Joomla.getOptions("com_community").base_url,o=this.$el.querySelector(".j-video-upload-area"),s=this.$el.querySelector(".joms-postbox-file-upload"),i=this.$el.querySelector(".j-video-upload-preview"),a=["mp4"];let r;switch(t.attachment.element){case"groups":r=e+"index.php?option=com_community&view=videos&task=uploadvideo&creatortype=group&groupid="+t.attachment.target;break;case"events":r=e+"index.php?option=com_community&view=videos&task=uploadvideo&creatortype=event&eventid="+t.attachment.target;break;case"pages":r=e+"index.php?option=com_community&view=videos&task=uploadvideo&creatortype=page&pageid="+t.attachment.target;break;default:r=e+"index.php?option=com_community&view=videos&task=uploadvideo&creatortype=user"}const n=new Ut.a(o,{url:r,createImageThumbnails:!1,clickable:s,addRemoveLinks:!0,maxFiles:1,previewsContainer:i,acceptedFiles:a.map(t=>"."+t).join(","),autoProcessQueue:!1,dictRemoveFile:Object(A.a)("remove"),dictCancelUpload:Object(A.a)("cancel")});n.on("sending",(e,o,s)=>{s.append("name",e.name),s.append("title",this.title),s.append("description",t.content.trim()),s.append("category_id",t.catid),s.append("mood",t.attachment.mood),s.append("permissions",t.attachment.privacy),t.attachment.location.length&&s.append("location",t.attachment.location.join(","))}),n.on("maxfilesexceeded",t=>{n.removeFile(t),this.showError("Too many files to upload")}),n.on("addedfile",t=>{const e=t.name.split("."),o=e.pop();(e.length<1||-1===a.indexOf(o))&&(n.removeFile(t),alert("Error! File type is not allow. ("+t.name+")")),this.togglePreview(),this.setFilesChange()}),n.on("removedfile",t=>{this.togglePreview(),this.setFilesChange()}),n.on("success",t=>{const e=JSON.parse(t.xhr.response);e.error&&(alert(e.msg),n.removeFile(t)),"error"===e.status&&(alert(e.message),n.removeFile(t)),"success"===e.status&&(alert(e.processing_str),this.reset(),this.$emit("reset")),this.$store.commit("setLoading",!1)}),n.on("canceled",()=>{this.togglePreview()}),this.dropzone=n},computed:{categoryId:{get(){return this.$store.state.video.catid},set(t){this.$store.commit("video/setCategory",t)}}},methods:{validate(){return+this.$store.state.video.catid?this.title?void this.upload():alert("Missing video title"):alert("Please choose category!")},upload(){this.$store.commit("setLoading",!0),this.dropzone.processQueue()},togglePreview(){this.preview=!!this.dropzone.files.length},setFilesChange(){this.dropzone.files.length?(this.$emit("typeChange","upload"),this.$store.commit("setFree",!1)):this.$emit("reset")},reset(){this.title="",this.dropzone.files.forEach(t=>{this.dropzone.removeFile(t)}),this.$refs.composer&&this.$refs.composer.reset()}}},Bo=(o(142),Object(G.a)(Do,Ao,[],!1,null,null,null));Bo.options.__file="src/views/postbox/video/JVideoUpload.vue";var No={components:{JVideoMiniBar:Mo,JVideoUpload:Bo.exports,JMoodPicker:Ht,JPrivacyPicker:mt,JLocationPicker:po,JVideoFetcher:So},data(){const{enablevideosupload:t}=a.a.get("conf"),e=t?"":"fetch";return{moodPicker:!1,privacy:!1,location:!1,type:e,defaultType:e,dropArea:!1,orText:Object(A.a)("video.or")}},computed:{categoryId:{get(){return this.$store.state.video.catid},set(t){this.$store.commit("video/setCategory",t)}},locationName(){const t=this.$store.state.video.attachment.location;return 3===t.length?t[0]:""}},methods:{showDropArea(){"fetch"!==this.type&&(this.dropArea=!0)},hideDropArea(){"fetch"!==this.type&&(this.dropArea=!1)},showLocation(){this.location=!0},hideLocation(){this.location=!1},setLocation(t){this.$store.commit("video/setLocation",t),this.hideLocation()},removeLocation(){this.$store.commit("video/setLocation",""),this.hideLocation()},setType(t){this.type=t},validate(){return"upload"===this.type?this.$refs.uploader.validate():"fetch"===this.type?this.$refs.fetcher.post():void 0},showMoodPicker(){this.moodPicker=!0},hideMoodPicker(){this.moodPicker=!1},showPrivacy(){this.privacy=!0},hidePrivacy(){this.privacy=!1},setMood(t){this.$store.commit("video/setMood",t)},setPrivacy(t){this.$store.commit("video/setPrivacy",t)},reset(){this.type=this.defaultType,this.$refs.fetcher&&this.$refs.fetcher.reset(),this.$refs.uploader&&this.$refs.uploader.reset(),this.$store.commit("video/reset"),this.$store.commit("setFree",!0)}}},Fo=(o(143),Object(G.a)(No,jo,[],!1,null,null,null));Fo.options.__file="src/views/postbox/video/JVideo.vue";var Io={components:{JTabNav:X,JCustom:ut,JEvent:ft,JFile:Xt,JGif:fe,JPhoto:ve,JPoll:Ie,JStatus:wo,JVideo:Fo.exports},computed:{currentComponent(){const t=this.$store.state.activeTab;return"J"+this.ucfirst(t)},tabShow(){return this.$store.state.free}},watch:{tabShow(t){}},methods:{ucfirst:t=>t.charAt(0).toUpperCase()+t.slice(1)}},Uo=Object(G.a)(Io,K,[],!1,null,null,null);Uo.options.__file="src/views/postbox/index.vue";var zo=Uo.exports;s.a.use(R.a);e.default=function(){new s.a({store:V,render:t=>t(zo)}).$mount(".joms-postbox")}}]]);